\documentclass{article}
\usepackage{fullpage}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{tgpagella}
\usepackage[euler-digits]{eulervm}
\usepackage{tikz-cd}
\usepackage{color}
\usepackage{hyperref}
\usepackage{qtree}
\usepackage{cite}
\author{William Schlieper}
\title{Vertex Operator Algebras}
\newcommand{\RR}{\mathbold{R}}
\newcommand{\CC}{\mathbold{C}}
\newcommand{\ZZ}{\mathbold{Z}}
\newcommand{\FF}{\mathbold{F}}
\newcommand{\QQ}{\mathbold{Q}}
\newcommand{\PP}{\mathbold{P}}
\newcommand{\CP}{\mathbold{CP}}
\newcommand{\MM}{\mathbold{M}}
\newcommand{\vac}{|0\rangle}
\newcommand{\Hh}{\mathcal{H}}
\newcommand{\Oo}{\mathcal{O}}
\newcommand{\Kk}{\mathcal{K}}
\newcommand{\Dd}{\mathcal{D}}
\newcommand{\Aa}{\mathcal{A}}
\newcommand{\Ff}{\mathcal{F}}
\newcommand{\Mm}{\mathcal{M}}
\newcommand{\Nn}{\mathcal{N}}
\newcommand{\Vv}{\mathcal{V}}
\newcommand{\Ww}{\mathcal{W}}
\newcommand{\Yy}{\mathcal{Y}}
\newcommand{\Bb}{\mathcal{B}}
\newcommand{\one}{\mathbold{1}}
\newcommand{\gf}{\mathfrak{g}}
\newcommand{\hh}{\mathfrak{h}}
\newcommand{\ghat}{\widehat{\mathfrak{g}}}
\newcommand{\normord}[1]{:\mathrel{#1}:}
\newcommand{\tk}{\textcolor{red}{*}}
\newcommand{\Sym}{\mathfrak{S}}
\newcommand{\xv}{\mathbold{x}}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\im}{im}
\begin{document}
\maketitle
This document is a reconstruction based on my notes of the vertex operator algebra seminar that ran during Spring Quarter 2016, run by Raphaël Rouquier.  Some notation has been changed (in particular, for the Heisenberg Fock space), some commentary has been added to my handwritten notes, and some definitions and concepts have been moved around, so as to make things more clear for the reader.

Right now, you might need a Unicode-based \LaTeX\ interpreter to properly compile this document, such as XeTeX, provided in most \TeX\ distributions.
\tableofcontents

\section{Introduction (Raphaël Rouquier, March 30)}
\label{sec:intro}

\subsection{Motivation}
\label{sec:mot}
(\tk can probably load this section with references, really)
Monstrous Moonshine may not be one of the most difficult problems in mathematics, but it is perhaps one of the strangest.  The theory involves the observation that, with the exception of the constant term $744$\footnote{which, though it usually isn't, can itself be explained using vertex operator algebras; instead of the Monster, it can be related to a vertex operator algebra obtained from the affine Lie algebra $\widehat{\mathfrak{e}_8}^3$; note that $744=3 \dim \mathfrak{e}_8$.}, the early Fourier terms of the modular $j$-invariant
\[j(\tau)=q^{-1}+744+196884q+21493760q^2+... \quad q=\exp(2 \pi i \tau)\]
correspond to small integer sums of dimensions of representations of the Monster group, the largest sporadic finite simple group: in particular, the smallest nontrivial representation of the Monster is of dimension $196883$, one less than the $q$ term of $j$.  Conway conjectured, and Borcherds proved, the following theorem:
\subsubsection{Theorem (Monstrous Moonshine) (Borcherds (1992)) \cite{MR1172696}}
\label{sec:monmoon}
There is a natural graded representation
\[V^\natural = V_0 \oplus V_1 \oplus ... \]
of the Monster group $M$ such that
\[j(\tau)-744=q^{-1}+\sum_{i=0}^{\infty} \dim V_i q^{i+1}. \]
Furthermore, for $g \in M$, the graded character
\[Tr_{V^\natural}(g;\tau)=q^{-1}+\sum_{i=0}^{\infty} Tr_{V_i}(g) q^{i+1} \]
is a modular function; that is, for some finite index subgroup of $SL_2(\ZZ)$ acting on $\tau$ by Möbius transformations, $Tr_{V^\natural}(g;\tau)$ is left invariant.

\subsection{Vertex Operator Algebras and Conformal Field Theories}
This representation of the monster has the structure of a vertex operator algebra, and, in fact, one good way to \textit{define} the Monster is simply to define it as the automorphisms of $V^\natural$ preserving the vertex operator algebra structure.  Of course, the previous sentence begs the question, quite strongly, of what a vertex operator algebra even \textit{is}.  Here, a hint is provided by the fact that Borcherds's proof uses a variant of the Weyl-Kac character formula to calculate traces, which for affine Kac-Moody algebras (see \cite{MR1104219}) is linked to modular forms as well.

In fact, vertex operator algebras are related to conformal field theory in $2$ dimensions, where the relevant local symmetries, described in terms of a complex number $z$, cleanly split into the symmetries holomorphic in $z$ and those holomorphic in $\overline{z}$; each of these will correspond to a VOA, and the CFT as a whole will link to a bimodule over both.  For more of this from a physics point of view, see \cite{2005hep.th....9027G}

\subsection{Formal power series}
\label{sec:formalpow}

Unlike the definitions preferred by physicists, the vertex operator algebra is an algebraic construction based on formal power series, so it is more abstract.  An important space of ``functions'' in this characterization is the \textit{formal distributions} $\CC[[z^{\pm 1}]]$, which consists of all abstract sums
\[a(z)=\sum_{n \in \ZZ} a_n z^n \quad a_n \in \CC. \]
Note that $\CC[[z^{\pm 1}]]$ is \textit{not} a ring; for instance, try to multiply the sum $\sum_{n \in \ZZ} z^n$ with itself.  However, for any Laurent polynomial $P(z) \in \CC[z^{\pm 1}]$ it is possible to multiply $P(z)$ with $a(z)$ and get another formal distribution; furthermore, there exists a natural residue
\[\Res_{z=0} a(z)=\Res_z a(z)=a_{-1} \]
which corresponds to the one defined for functions holomorphic on $\CC^\times$ using a contour integral; the name formal distributions comes from the fact that multiplying and using the residue gives a natural definition of $\CC[[z^{\pm 1}]]$ as a linear dual to the test functions $\CC[z^{\pm 1}]$.

Another way two power series $a(z),b(z) \in \CC[[z^{\pm 1}]]$ can be multiplied is simply to apply them to different variables: the product is simply
\[a(z)b(w)=\sum_{m \in \ZZ}a_mz^m \cdot \sum_{n \in \ZZ}b_nw^n \in \CC[[z^{\pm 1},w^{\pm 1}]], \]
where the formal distributions in two variables are defined in a similar way to those in one.

The immediate question to ask, for any two-variable formal distribution, is: what happens when $z$ approaches $w$?  As is easy to see, this cannot be calculated directly, especially in the cases we are most interested in.  In particular, consider the formal version of the Dirac delta function
\[\delta(z,w)=\sum_{n \in \ZZ} z^n w^{-n-1} \]
which has, much like the Dirac delta function used in analysis, the property that for any Laurent polynomial $P(z) \in \CC[z^{\pm 1}]$, we have
\[P(z) \delta(z,w) = P(w) \delta(z,w). \]
Also like the Dirac delta function, we have:
\begin{align*}
  (z-w) \delta(z,w) &= 0\\
  (z-w)^m \left(\frac{\partial}{\partial z} \right)^n (\delta(z,w))&=0 \quad m>n
\end{align*}
This property of the derivatives of the formal delta function is important, as it implies a value that can be thought of as zero outside of $z=w$; a two-variable formal distribution $a(z,w) \in \CC[[z^{\pm 1},w^{\pm 1}]]$ is called \textit{local} if
\[(z-w)^n a(z,w)=0 \]
for some $n \ge 0$.

\subsection{Vertex algebras}

A vertex algebra will be defined as a vector space $V$, together with a formal distribution $Y(A,z)$ over $\End(V)$ for every $A \in V$ such that $Y(A,z)$ and $Y(B,w)$ are local for all $A,B \in V$, as well as some conditions involving the identity or vacuum $\vac$

The simplest case of a vertex algebra is a commutative one, where the locality condition on the vertex operators is strengthened to actual commutation, or, equivalently, all negative-degree terms are zero.  In this case, we have
\[Y(A,z)=\sum_{n=0}^{\infty} \frac{z^n}{n!}(T^nA) \]
where $T^nA \in V$ corresponds to an endomorphism of $V$ from a commutative algebra structure on $V$.

Non-commutative vertex algebras, however, are already difficult to write down even in the simplest cases and require heavy use of the technique of normal ordering of infinite sums to produce a valid field.

In order to properly relate the purely formal vertex algebra structure to the more geometric structures implied by conformal field theory, one must add extra structure to the vertex algebra.  Let $c \in \CC$; a \textit{vertex operator algebra with central charge $c$} is a vertex algebra with a $\ZZ$-grading (isn't the grading part of the VA def?) and a specific element
\[\omega \in V_2 \quad Y(\omega,z) =: \sum_{n \in \ZZ} L_n z^{-n-2} \]
where the Fourier coefficients $L_n$ satisfy the Virasoro relations
\[[L_m,L_n]=(m-n)L_{m+n}+\frac{c}{12}(m^3-m)\delta_{m,-n} id, \]
the operator $L_{-1}=T$ identifies a lift of $-t^0\partial_t$ with the translation operator, and $L_0|_{V_n}=n \cdot id$ identifies a lift of $-t\partial_t$ with the grading operator.

\subsection{Vertex operator algebras and geometry}
Given a vertex operator algebra, one can connect it to the geometry of algebraic curves in various interrelated ways.  By the mechanisms of algebraic geometry, the fields of a vertex operator algebra $V$ can be thought of as being $\End V$-valued functions on a formal disk; the challenge is to figure out how best to extend these to algebraic curves.

Given a vertex operator algebra $V$, a projective algebraic curve $X$, and a finite collection of representations $M_1,...,M_n$ attached to points $x_1,...,x_2 \in X$, there is a vector space called the space of conformal blocks consisting of functionals for which the process of multiplying an element can be extended from punctured formal neighborhoods of the $x_i$s to the curve $X$ with the points $x_i$ removed.  In fact, using the full Virasoro action, one can extend this from a vector space to the full structure of a (twisted) $\Dd$-module on the moduli space $\mathcal{M}_{g,n}$ of genus $g$ algebraic curves with $n$ points.

In particular, given $X=\CP^1$, points $0,1,\infty$, and $V$ itself attached at $0$ and $1$ and the restricted dual $V^\wedge$ attached at $\infty$, the vertex operators themselves turn out to be conformal blocks; if more points are attached, then the corresponding conformal blocks will turn out to be the composed vertex operators, which can be combined into an operadic approach.

A similar construction to the vertex algebra is the \textit{factorization algebra} developed by Beilinson and Drinfeld: given an algebraic curve $X$, we construct a ``sheaf'' on the space of finite subsets of $X$ and a specialized product structure with singularities on the diagonals; this turns out to be equivalent to the \textit{chiral algebra} also developed by Beilinson and Drinfeld, in which we construct a $\Dd$-module on $X$ with a structure similar to a Lie bracket on $X^2$ with a singularity on the diagonal.

(\tk probably mention rational VOAs here?  I think I might wait 'til I see what Kevin has planned)

\subsection{Examples}
\begin{itemize}
\item Given an affine Lie algebra and a level $k$, one can construct a vertex algebra whose representations are representations of the affine Lie algebra at level $k$; when $k \ne - h^\wedge$, this is a vertex operator algebra.  When $k$ is also a positive(?) integer, then 
\item There is a construction that, given an even integral lattice, produces a rational vertex operator algebra.  In this case, the graded character of a representation can be expressed naturally in terms of theta functions.  If the lattice is a root lattice of type $ADE$, then the corresponding lattice VOA is isomorphic to the rational vertex operator algebra derived from the corresponding level $1$ affine Lie algebra VOA.
\item When the lattice used in the lattice construction is the Leech lattice, there is an involution acting as $-1$ on level $1$ elements.  When one takes the subset of the lattice VOA preserved by that involution, this itself is a VOA; taking the direct sum of this VOA with another representation of it acts as a twisted VOA which produces the Monster vertex operator algebra $V^\natural$.
\end{itemize}

\section{Vertex algebras: definition and Heisenberg (Jeremy Brightbill, April 13)}
\label{sec:defheis}

\subsection{Formal distributions}
Let $R$ be a $\CC$-algebra.  Then, for any integer $n$, the \textit{$R$-module of formal distributions} $R[[z_1^{\pm 1},...,z_n^{\pm 1}]]$ can be defined simply as the set of $\ZZ^n$-tuples of elements of $R$, thought of accordingly as formal power series extending in all directions.  Formal distributions generally do not form a ring; however, given two formal distributions $a(z),b(z) \in R[[z]]$ defined as
\begin{align*}
  a(z)&=\sum_{n \in \ZZ}a_nz^n\\
  b(z)&=\sum_{n \in \ZZ}b_nz^n
\end{align*}
there is a product in \textit{different} variables
\[a(z)b(w) = \sum_{m,n \in \ZZ}a_mb_nz^mw^n. \]
Furthermore, the $R$-module structure can be extended to $R[z_1^{\pm 1},...,z_n^{\pm 1}]$ by multiplying and interleaving the finite with the infinite sum.

To ``evaluate'' formal distributions, since getting any actual values in the context of infinite power series is impossible, the correct idea is instead to use the residue as the formal version of the integral around a small circle around $0$: as such, 
\[\Res_{z=0}a(z)=a_{-1} \]
and, in fact, for vertex algebra purposes it makes more sense to number formal distributions using the residue, which we will denote as
\begin{align*}
  a(z)&=\sum_{n \in \ZZ}a_{(n)}z^{-n-1}\\
  a_{(n)}&=\Res_{z=0}a(z)z^n.
\end{align*}

Recall the formal delta function from \ref{sec:formalpow}, defined as
\[\delta(z,w)=\sum_{n \in \ZZ}z^nw^{-n-1}, \]
(note that it is sometimes(\tk need to make my notation on this consistent) also denoted as $\delta(z-w)$) and the fact that it satisfies
\[(z-w)\delta(z,w)=0. \]
\subsection{Fields and locality}
Let $V$ be a vector space over $\CC$.  We define a \textit{field} to be an element
\[A(z) \in \End_\CC(V)[[z^{\pm 1}]] \quad A(z)=\sum_{n \in \ZZ} A_{(n)}z^{-n-1} \]
of formal distributions over the endomorphisms of $V$, such that, for all $v \in V$ there exists an $N$ such that $A_{(n)}v=0$ for all $n>N$; that is, 
\[A(z)v \in V((z)) \quad \forall v \in V. \]
Note that $A$ being a field is a weaker condition than $A$ being a formal Laurent series over $\End(V)$; the latter would include a global $N$ for all $v \in V$.  Furthermore, to work over $\CC$, we can consider a pair of $\varphi \in V^*, v \in V$, and note that the evaluation
\[\langle \varphi, A(z)v \rangle \in \CC((z)) \]
is itself a formal Laurent series.

If $V$ is also $\ZZ$-graded, then a field $A(z)$ is said to have \textit{conformal dimension} $N \in \ZZ$ if $A_{(n)}$ is homogeneous of degree $-n+N-1$; that is, if $z$ is thought of as having degree $-1$, then a conformal dimension $N$ field will be homogeneous of degree $N$.

Given two fields $A(z),B(w)$, we would like to be able to compare $A(z)B(w)$ and $B(w)A(z)$.  However, for them to be equal as formal distributions over $\End V$ is a very strong condition.  Given $v \in V, \varphi \in V^*$, we'd like to compare the two expressions
\begin{align}
  \langle \varphi, A(z)B(w) v \rangle &\in \CC((z))((w)) \label{expansion1}\\
  \langle \varphi, B(w)A(z) v \rangle &\in \CC((w))((z)). \label{expansion2}
\end{align}
(might be able to add some more about why they lie in the given formal Laurent series)
For these to be equal as formal distributions in two variables, they must both be expressible as elements of $\CC[[z,w]][z^{-1},w^{-1}]$, which is a very strong constraint on the possible coefficients of the two fields for negative powers of $z$ and $w$.  For example, consider the function $1/(z-w)$.  It can be expanded into formal power series in two ways, depending on whether it is expanded in $z$ or $w$:
\begin{align}
  \frac{1}{z-w}&=\sum_{n<0}z^nw^{-n-1} \in \CC((z))((w))\\
  \frac{1}{z-w}&=-\sum_{n \ge 0}z^nw^{-n-1} \in \CC((w))((z)).
\end{align}
Notice that the difference between the two power series is precisely the formal delta function mentioned before.  Indeed, the diagram
\[
  \begin{tikzcd}
    \CC[[z,w]][z^{-1},w^{-1},(z-w)^{-1}] \arrow[r,hook,"\textrm{expand at }w"] \arrow[d,hook,"\textrm{expand at }z"] & \CC((z))((w)) \arrow[d,hook,"\textrm{inclusion}"]\\
    \CC((w))((z))\arrow[r,hook,"\textrm{inclusion}"]& \CC[[z^{\pm 1},w^{\pm 1}]]
  \end{tikzcd}
\]
does \textit{not} commute!  However, the difference between the two maps will always be local in the sense that multiplyng some power of $(z-w)$ will take it to zero, thus providing an alternate characterization of locality.
\subsubsection{Definition (locality)}
Let $A(z),B(z) \in \End (V)[[z^{\pm 1}]]$ be fields over a vector space $V$.  We say that $A(z)$ and $B(w)$ are local with respect to each other if, for all $v \in V, \varphi \in V*$ there exists
\[f_{v,\varphi} \in \CC[[z,w]][z^{-1},w^{-1},(z-w)^{-1}] \]
such that the expressions (\ref{expansion1}) and (\ref{expansion2}) are both expansions of $f_{v,\varphi}$, and that the order of the pole of $(z-w)$ in $f_{v,\varphi}$ is uniformly bounded.
Note that locality is not in fact a trivial condition even in the case $A=B$.

\subsubsection{Proposition}
$A(z)$ and $B(w)$ are local if and only if there exists an $N$ such that $(z-w)^N[A(z),B(w)]=0$ as elements of $\End(V)[[z^{\pm 1},w^{\pm 1}]]$.

\subsection{Vertex Algebras}

\subsubsection{Definition}
A \textit{vertex algebra} consists of the following data:
\begin{itemize}
\item A vector space $V$ over $\CC$.
\item A distinguished element $\vac \in V$, called the \textit{vacuum vector}.
\item A linear map $T: V \rightarrow V$ called \textit{translation}.
\item A linear map $Y(-,z): V \rightarrow \End(V)[[z^{\pm 1}]]$ such that for any $A \in V$, the formal distribution
  \[Y(A,z)=\sum_{n \in \ZZ} A_{(n)} \]
  is a field.  These are called the \textit{vertex operators}.
\end{itemize}
satisfying the following properties:
\begin{itemize}
\item The vacuum axiom:
  \begin{align}
    Y(\vac,z)&=id_Vz^0\\
    Y(A,z)\vac &\in V[[z]],\\
    Y(A,z)\vac|_{z=0}&=A\quad \forall A \in V.
  \end{align}
\item The translation axiom:
  \begin{align}
    T \vac &= 0\\
    [T,Y(A,z)]&=\partial_z Y(A,z)
  \end{align}
\item The locality axiom: For all $A,B \in V$, the fields $Y(A,z)$ and $Y(B,w)$ are local to one another.
\end{itemize}

\subsubsection{Graded vertex algebras}
A vertex algebra $V$ is ($\ZZ-$)graded if:
\begin{itemize}
\item $V$ is $\ZZ$-graded; i.e.
  \[V = \bigoplus_{n \in \ZZ} V_n \]
\item $\vac \in V_0$
\item $T$ is homogeneous of degree $1$; that is, $TV_n \subseteq V_{n+1}$
\item $Y(A,z)$ has conformal dimension $m$ for all $A \in V_m$
\end{itemize}
Most of the vertex algebras seen in the wild are graded; in particular, a vertex operator algebra is by definition a graded vertex algebra.

\subsubsection{Vertex algebra homomorphisms}
A homomorphism
\[\rho: (V,\vac,T,Y(-,z)) \rightarrow (V',\vac',T',Y'(-,z)) \]
is a linear map $\rho: V \rightarrow V'$ such that:
\begin{align}
  \rho \circ T &= T'\circ \rho\\
  \rho(Y(A,z)B)&=Y'(\rho(A),z)\rho(B) \quad \forall A,B \in V
\end{align}
This definition of a vertex algebra morphism also lets you define, straightforwardly, the idea of a subalgebra, that of a quotient, and that of an ideal as the kernel of a quotient.

Furthermore, one can define the tensor product of two vertex algebras such that $V \rightarrow V \otimes W$ and $W \rightarrow V \otimes W$ are vertex algebra homomorphisms.

\subsubsection{Properties of vertex algebras}
By the translation and vacuum axioms, we have
\begin{align}
  A_{(-2)}\vac &= \partial_z Y(A,z) \vac |_{z=0}\\
  &=[T,Y(A,z)]\vac|_{z=0}\\
  &=TA.
\end{align}
Similarly, $T^nA=n!A_{(-n-1)}\vac$.  Equivalently,
\[Y(A,z) \vac = \sum_{n=0}^\infty \frac{1}{n!} T^nA z^n = e^{zT}A \]
which can be interpreted as relating $T$ to translation, as interpreting $\exp$ of operators in the same way with differentials gives the relation $e^{w \partial_z}f(z)=f(z+w)$ for $f$ a polynomial.

In general, if $Y(A,z)=A_{(-1)}z^0$ for all $A \in V$, then $T=0$, $Y: V \rightarrow \End(V)$ will simply be the map taking an element to left-multiplication by it, locality implies commutativity, and $V$ picks up the structure of a commutative algebra with unit.

If $Y(A,z)$ and $Y(B,w)$ commute for all $A,B \in V$, then all vertex operators will lie in $\End(V)[[z]]$ and multiplication can be defined as
\[A \circ B = Y(A,z)B|_{z=0}. \]
Using this multiplication, $V$ is a commutative algebra, with $T$ acting as a derivation, and
\[Y(A,z)B=(e^{zT}A) \circ B \quad \forall A,B \in V \]

Given a field $A(z)$ on a vertex algebra $V$ local to all $Y(B,z)$, if we have an $a \in V$ such that
\[A(z)\vac=Y(a,z) \vac, \]
or, equivalently, $\partial_z A(z) \vac=TA(z)\vac$ and $A(z)\vac \in V[[z]]$, then we have that $A(z)=Y(a,z)$.  In particular \footnote{after extending by $w$ and $z-w$} note the field $Y(A,z)Y(B,w)$ extended to maps to $V[[z,w]][z^{-1},w^{-1},(z-w)^{-1}]$ will be the same as the extension of $Y(Y(A,z-w)B,w)$ to the same: this corresponds to associativity in the regular algebra case and is usually called associativity, \textit{the Cousin property}, and when written explicitly as
\[Y(A,z)Y(B,w)=Y(Y(A,z-w)B,w)=\sum_{n \in \ZZ}\frac{Y(A_{(n)}B,w)}{(z-w)^{n+1}} \]
(where $1/(z-w)$ is expanded at $w$) is called the \textit{operator product expansion}.  These properties are incredibly important in terms of being able to calculate any properties at all of vertex algebras.
\subsection{The Heisenberg vertex algebra}

\subsubsection{The Heisenberg Lie algebra}


Start by considering the algebra of formal Laurent series $\CC((t))$ as a vector space, and then that vector space as a Lie algebra with trivial bracket.  Then, the Heisenberg Lie algebra is defined as the central extension of $C((t))$ with the short exact sequence
\[1 \rightarrow \CC \cdot \one \rightarrow \Hh \rightarrow \CC((t)) \rightarrow 0 \]
such that (after choosing arbitrarily a vector space splitting of $H$)
\[[f(z),g(z)]=-\Res(f\,dg) \cdot \one. \]
(Note that the bolded number one, $\one$, is a different character from the usual number one, $1$.)  

Alternatively, if we extended instead the subalgebra $\CC[t^{\pm 1}]$ of $\CC((t))$ consisting of Laurent polynomials, we would get the subalgebra $\Hh' \subsetneq \Hh$.  A basis for $\Hh'$ which serves as a topological basis for $\Hh$ is as follows: define $b_n=t^n$, and then the set $\{b_n\}_{n \in \ZZ} \cup \{\one\}$ form the basis.  The Heisenberg algebra can also be defined using explicit generators and relations:
\begin{align}
  [b_n,\one]&=0\\
  [b_m,b_n]&=-\Res(t^n\,dt^m)\cdot\one\\
  &=-\Res(mt^{n+m-1}dt)\cdot\one\\
  &=n\delta_{m,-n}\cdot\one
\end{align}

(This is a part that I'm writing a bit differently so as to not have to use a bunch of tildes)
Note that it is possible to give the Heisenberg algebra a ``triangular decomposition'' as 
\[\Hh \simeq_{\CC-Mod} t^{-1}\CC[t^{-1}] \oplus \one \oplus \CC[[t]].  \]

\subsubsection{The Fock space}
\label{sec:fockspace}

Let $\CC_0$ be the one-dimensional representation of $\CC \cdot\one \oplus \CC[[t]]$ that is acted on by $\CC[[t]]$ trivially and by $\one$ by $1$.  Then, we define the \textit{Heisenberg vertex algebra} or \textit{Fock space} as
\[\pi:=\Ind_{\CC \cdot \one \oplus \CC[[t]]}^\Hh\CC_0=U(\Hh) \otimes_{U(\CC \cdot \one \oplus \CC[[t]]}\CC_0. \]
Recall that, given a Lie algebra $\gf$, the universal enveloping algebra $U(\gf)$ is the quotient of the free algebra generated by $\gf$ by the two-sided ideal generated by $gh-hg-[g,h]$ for all $g,h \in \gf$; in particular, for an abelian Lie algebra, it is isomorphic to the polynomial algebra generated by $\gf$.

By the Poincaré-Birkhoff-Witt theorem, there is a canonical basis for $\pi$ as follows: Let $\vac$ be the vector $1 \otimes 1$ killed by $\CC[[t]]$.  Then, the Heisenberg vertex algebra has the following isomorphism: 
\[\pi = U(t^{-1}\CC[t^{-1}])\cdot \vac \simeq U(t^{-1}\CC[t^{-1}])=\CC[b_{-1},b_{-2},...]  \]
where the isomorphism is found simply by applying the relevant element to $\vac$.  Note that, under this isomorphism, the actions of the various basis elements of the Heisenberg Lie algebra are as follows:
\begin{align}
  b_n, n<0&: n\frac{\partial}{\partial b_{-n}}\\
  b_0&:0\\
  b_{n},n>0&:b_n \cdot\\
  \one&:id.
\end{align}
The vector space $\pi$ can be given the structure of a graded vertex algebra as follows:
\begin{itemize}
\item The vacuum vector is, as already implied, the canonical vector $\vac$ killed by $\CC[[t]]$.
\item Translation can be defined as follows:
  \begin{align*}
    T\vac&=0\\
    [T,b_j]&=-jb_{j-1}\quad j<0
  \end{align*}
  Given these two relations, an induction argument lets one find the translation operator for any $v \in \pi$.
\item The grading also follows from the grading on the Lie algebra making $b_j$ homogeneous degree $-j$, as well as $\vac$ necessarily being degree $0$.
\item The vertex operator $Y(\vac,z)=id_\pi$ is known by the definition.  In all other cases, it will be possible to reconstruct all the vertex operators from that and the simplest vertex operator
\[Y(b_{-1}\vac,z)=\sum_{n \in \ZZ}b_nz^{-n-1}=:b(z).\]
\end{itemize}
For the elements $b_{-k} \vac$, the translation axiom shows
\[b_{-k} \vac = \frac{1}{(k-1)!}T^{k-1}b_{-1}\vac \]
and so we can calculate
\[Y(b_{-k}\vac,z)=\frac{1}{(k-1)!}\left(\frac{\partial^{k-1}}{\partial z^{k-1}} b(z) \right) \]
To find the vertex operators for states with more than one $b_j$ involved, a more complicated approach is necessary.  Naively, one might expect to find something like ``$Y(b_{-1}^2\vac,z)=b(z)^2$'', but there is a problem: the Fourier coefficients of the naively computed $b(z)^2$,
\[\sum_{k,l \in \ZZ; k+l=n}b_kb_l=("b(z)^2")_{(n+1)}, \]
do not exist.

In the case $n \ne 0$, however, these terms can be finessed into existing.  Note that $b_k$ and $b_l$ will commute in this case, as $k+l \ne 0$.  As such, for all but finitely many $(k,l)$ pairs, one of the two terms will correspond to a positive number; for all $A \in \pi$, all but finitely many positive terms will act as $0$ on $A$, so by rearranging the terms, we can see that
\[\sum_{k+l=n}b_kb_lA \]
can be given a definite value.

For $n=0$, however, this runs into a problem, as $b_k$ and $b_{-k}$ do not commute.  Attempting this calculation ends up as follows:
\begin{align*}
  \sum_{n \in \ZZ}b_nb_{-n}A&=\sum_{n < 0}b_nb_{-n}A + \sum_{n \ge 0}b_nb_{-n}A\\
  &=\sum_{n<0}b_nb_{-n}A+\sum_{n \ge 0}b_{-n}b_nA+nA
\end{align*}
which involves the divergent sum $\sum_{n=0}^\infty n$.  This is clearly a problem, especially in the computation of formal power series.

\subsubsection{Normal ordering}

The solution, called \textit{normal ordering}, is just to rearrange the terms such that positive-indexed terms appear to the right of negative-indexed terms anyway, ignoring commutation.\footnote{Those of you familiar with the Riemann zeta function, or with a certain internet controversy from 2014, are probably wondering where the factor of $1/12$ went.  Such people should attempt to prove directly that $\frac{1}{2}\normord{b(z)b(z)}$ is local with itself.}  Let $A(z),B(w)$ be fields over some variables.  Then, define the \textit{normal-ordered product} of the terms as follows:
\[\normord{A(z)B(w)} = \sum_{n \in \ZZ}\sum_{m<0}A_{(m)}B_{(n)}z^{-m-1}w^{-n-1}+\sum_{n \in \ZZ}\sum_{m \ge 0}B_{(n)}A_{(m)}z^{-m-1}w^{-n-1}. \]
To normally-order a product of more than two fields, use the right-associative expansion; that is,
\[ \normord{A(z)B(w)C(u)}  =\normord{ A(z) (\normord{B(w)C(u)} )} \]

With this definition of normal ordering, we can now give the formula for the vertex operator:

Let $k$ be a positive integer and $j_1,...,j_k$ be integers $\le -1$.  Then,
\[Y(b_{j_1}...b_{j_k}\vac,z)=\frac{1}{\prod_{i=1}^k(-j_i-1)!} \normord{\frac{\partial^{-j_1-1}}{\partial z^{-j_1-1}}(b(z))...\frac{\partial^{-j_k-1}}{\partial z^{-j_k-1}}b(z)} \]

\subsubsection{Proof of $\pi$'s vertex algebra structure}
Now, we wish to show that $\pi$ is indeed a vertex algebra.

First, the vacuum axiom.  That $Y(\vac,z)=id_\pi z^0$ is true by definition.  For $A=b_{-k}\vac$, we have
\begin{align}
  Y(b_{-k}\vac,z)&=\left(\frac{1}{(k-1)!} \frac{\partial^{k-1}}{\partial z^{k-1}} b(z) \right) \vac\\
  &=\sum_{n \in \ZZ}\frac{(-n-1)(-n-2)...(-n-k)}{(k-1)!} b_n z^{-n-k} \vac\\
  &=\sum_{n=0}^\infty \binom{n+k-1}{k-1}b_{-n-k}\vac z^n \in \pi[[z]]\\
  Y(b_{-k}\vac,z)|_{z=0}&=b_{-k}.
\end{align}
For more general $A$, we induct on the word length.  Let $A \in \pi$ be such that the vacuum axiom is known for $A$.  Then, we have
\begin{align}
  Y(b_{-k}A,z)&= \sum_{m \in \ZZ}(b_{-k}A)_{(m)}z^{-m-1}\\
  (b_{-k}A)_{(m)}&=\frac{1}{(k-1)!}\sum_{n \le -k}(-n-1)...(-n-k+1)b_nA_{(m-n-k)}\\
  &+\sum_{n \ge 0}(-n-1)...(-n-k+1)A_{(m-n-k)}b_n
\end{align}
For $n \ge 0$, every $b_n$ annihilates $\vac$.  For $n \le -k$, $n+k \ge 0$ so $A_{(m-n-k)}$ annihilates $\vac$ for $m \ge 0$, so that $Y(b_{-k}A,z)\vac \in \pi[[z]]$.

For $m=-1$ (that is, the value at $0$), all values of $n$ other than $n=-k$ will contain a term annihilating $\vac$, so
\begin{align}
  Y(b_{-k}A,z)\vac|_{z=0}&=\frac{(k-1)!}{(k-1)!}b_{-k}A_{(-1)}\vac\\
  &=b_{-k}A.
\end{align}

The translation axiom is true by definition for $b_j\vac$ and follows for other elements by a generalization of the Leibniz rule.

For locality, we again use an induction, but a more complicated one.  First, we show that $b(z)$ is local to itself; that all $Y(b_{-k}\vac,z)$ are mutually local will follow from applying derivatives.  The induction step relies on repeated application of a key lemma called Dong's Lemma.

The self-locality for $b(z)$ follows from
\begin{align}
  [b(z),b(w)]&=\sum_{m,n \in \ZZ}[b_n,b_m]z^{-n-1}w^{-m-1}\\
  &=\sum_{n \in \ZZ}[b_n,b_{-n}]z^{-n-1}w^{n-1}\\
  &=\sum_{n \in \ZZ}nz^{-n-1}w^{n-1}\\
  &=\frac{\partial}{\partial w}\delta(z,w)=-\frac{\partial}{\partial z}\delta(z,w),
\end{align}
which satisfies
\[(z-w)^2 \frac{\partial}{\partial w}\delta(z,w)=0.\]  
For other $Y(b_{-k}\vac,z)$, simply note that the multiple derivatives will be killed by higher powers of $z-w$.  The induction step follows from the following lemma:

\subsubsection{Dong's Lemma}
Suppose that $A(z),B(w),C(u)$ are mutually local fields.  Then, $\normord{A(w)B(w)}$ and $C(u)$ are local to each other.
\subsubsection{Reconstruction theorem}
\label{sec:recthm}
This process of generating the vertex operators from the single vertex operator $b(z)$ can be generalized to a more general theorem building up a vertex operator algebra from a distinguished set of vertex operators.

Let $V$ be a vector space, and fix the following:
\begin{itemize}
\item An element $\vac \in V$, to be the vacuum vector.
\item An endomorphism $T \in \End(V)$, to be the translation operator.
\item A countable totally ordered set $S$
\item A set $\{a^s\}_{s \in S}$ of vectors in $V$.
\item A set $a^s(z)=\sum_{n \in \ZZ}a^s_{(n)}z^{-n-1}$ of fields over $V$.
\end{itemize}
Suppose:
\begin{enumerate}
\item For all $s \in S$, $a^s(z)\vac=0$ and $a^s(z)\vac|_{z=0}=a^s$, hardwiring the vacuum axiom for all $a^s$.
\item $T\vac=0$ and $[T,a^s(z)]=\partial_za^s(z)$, hardwiring the translation axiom.
\item All $a^s(z)$ are mutually local.
\item $V$ has a Poincaré-Birkhoff-Witt-style basis consisting of elements
\[
  \{a^{s_1}_{(j_1)}...a^{s_m}_{(j_m)}\vac\}\quad
  j_1 \le ... \le j_m\quad
  s_i \le s_{i+1}\textrm{ if }j_i=j_{i+1}.
\]
\end{enumerate}
Then, there is a vertex algebra structure on $V$ given by the equation
\[
  Y(a^{s_1}_{(j_1)}...a^{s_m}_{(j_m)}\vac,z)=\frac{1}{\prod_{r=1}^m(j_r-1)!} \normord{\prod_{r=1}^m \frac{\partial^{-j_r-1}}{\partial z^{j_r-1}}a^{s_r}(z)}.
\]
(\tk I should figure out how to make the $:$s bigger)

\section{Lattice vertex algebras and affine algebras (Dustan Levenstein, April 20)}
\label{sec:latticeaffine}

\subsection{Affine Kac-Moody algebras}
Let $\gf$ be a finite-dimensional simple Lie algebra over $\CC$.  Define the \textit{loop algebra} as
\begin{align*}
  L\gf=\gf((t))&=\gf \otimes \CC((t))\\
  [A \otimes f(t),B \otimes g(t)]&=[A,B] \otimes f(t)g(t)
\end{align*}
The \textit{affine Lie algebra} or \textit{affine Kac-Moody algebra}\footnote{Some definitions, such as Wikipedia's, define the algebra as the semidirect product of the above algebra with a derivation that makes powers of $t$ into a grading; however, in the context of vertex operator algebras, the grading is considered part of the definition as well as being implied by the Sugawara conformal vector.} $\ghat$ is defined as a central extension of $L\gf$
\[0 \rightarrow \CC \cdot K \rightarrow \ghat \rightarrow L\gf \rightarrow 0 \]
as follows: first, we need an invariant form on $\gf$.  Start with the Killing form
\[(x,y)_K=Tr_\gf(ad_xad_y) \]
and normalize using the \textit{dual Coxeter number} $h^\vee$
\[(x,y)=\frac{1}{2h^\vee}(x,y)_K; \]
this invariant form has the property that if $v$ is a maximum-length root vector, $(v,v)=2$; also, if $\gf=\mathfrak{sl}_n$, then $(x,y)=Tr_{\CC^n}(xy)$ for $\CC^n$ the natural representation.

To define $\ghat$, use the natural vector space splitting of $L\gf$ and deform the Lie bracket to
\[[A \otimes f(t),B \otimes g(t) = [A,B] \otimes f(t)g(t) - \Res_{t=0}(f\,dg) (A,B)K. \]

\subsection{The vacuum representation of $\ghat$}
Much like the Heisenberg vertex algebra, observe the decomposition
\[\ghat = t^{-1}\gf[t^{-1}] \oplus \CC \cdot K \oplus \gf[[t]] \]
where $\gf[[t]]$ is defined in analogy to $\gf((t))$.  Let $k \in \CC$; define $\CC_k$ to be the representation of $\gf[[t]] \oplus \CC \cdot K$ on which $\gf[[t]]$ acts by $0$ and $K$ acts by $k$.  Similarly to the construction of the Heisenberg vertex algebra in (\ref{sec:fockspace}), we define the \textit{vacuum representation at level $k$} as follows:
\[V_k(\gf):=\Ind_{\CC \cdot K \oplus \gf[[t]]}^{\ghat}\CC_k = U(\ghat) \otimes_{U(\CC \cdot K \oplus \gf[[t]])}\CC_k. \]
Again, let $\vac$ be the canonical vector $1 \otimes 1$ killed by $\gf[[t]]$; to define a basis for $V_k(\gf)$, we first let $d=\dim \gf$, let $\{J^1,...,J^d\}$ be a basis for $\gf$, define the topological basis
\[\{J^a_n=J^a \otimes t^n|1 \le a \le d, n \in \ZZ \} \]
for $\ghat$.  With this, we can use the Poincaré-Birkhoff-Witt theorem to find a basis
\[J^{a_1}_{n_1}...J^{a_m}_{n_m}\vac \quad n_1 \le ... \le n_m < 0 \quad a_i \le a_{i+1} \textrm{ when }n_i=n_{i+1} \]
for $V_k(\gf)$.

Give $V_k(\gf)$ a vertex algebra structure as follows:
\begin{itemize}
\item Give $V_k(\gf)$ a grading such that $\deg \vac=0$ and $J^a_n$ has degree $n$,
\item $\vac$, as expected, is the vacuum vector,
\item $T\vac=0, [T,J^a_n]=-nJ^a_{n-1}$ will be sufficient to define $T$,
\item $Y(\vac,z)=id$,
\item \[Y(J^a_{-1}\vac,z)=J^a(z):=\sum_{n \in \ZZ}J^a_nz^{-n-1}, \]
\item and note that the conditions for the reconstruction theorem in (\ref{sec:recthm}) hold, giving the structure.
\end{itemize}
Note that $J^a(z)$ can be thought of as a pullback of the operator $\sum_{n \in \ZZ}(J^a \otimes t^n)z^{-n-1}$ which ``looks like'' $J^a\delta(t,z)$, making it an ``operator-valued $\delta$ function''.
\subsection{The Virasoro algebra}
\label{sec:virasoro}
Let $\Oo=\CC[[t]]$ and $\Kk=\CC((t))$.  Define the Lie algebra of derivations of $\Kk$ as $\Der \Kk = \CC((t)) \partial_t$, and define the \textit{Virasoro Lie algebra} as the central extension
\[0 \rightarrow \CC \cdot C \rightarrow Vir \rightarrow \Der \Kk \rightarrow 0 \]
such that
\[[f(t)\partial_t,g(t)\partial_t]=(fg'-f'g)\partial_t+\frac{1}{12}(\Res_{t=0}fg'''\,dt)C. \]

There exists a topological basis of $Vir$ by $C$ and $L_n=-t^{n+1}\partial_t$ for $n \in \ZZ$, with commutation relations
\[[L_n,L_m]=(n-m)L_{n+m}+\frac{n^3-n}{12} \delta_{n,-m}C. \]

Note that this definition depends on the coordinates; there exists a coordinate-free version of the Virasoro algebra, as $H^2(\Der \Kk)=\CC$ so it is essentially unique (aside from the constant $1/12$), but there does not exist a coordinate-free \textit{splitting} of the algebra.

Define
\[T(z) := \sum_{n \in \ZZ}L_nz^{-n-2}; \]
then the Virasoro commutation relations can be summed up as
\[[T(z),T(w)]=\frac{C}{12}\partial^3_w \delta(z,w)+zT(w)\partial_w\delta(z-w)+\partial_wT(w)\delta(z-w). \]
In particular, $T(z)$ is local to itself.

Let $c \in \CC$. To define the \textit{Virasoro vertex algebra} $Vir_c$, start with the subalgebra $\Der \Oo=\CC[[t]]\partial_t$ and the representation $\CC_c$ on which $\Der \Oo$ acts as $0$ and $C$ acts by $c$; we then have
\[Vir_c=\Ind_{\Der \Oo \oplus \CC \cdot C}^{Vir}\CC_c. \]
We call $c$ the \textit{central charge} and say that $Vir_c$ has central charge $c$.

The vertex algebra structure is as follows:
\begin{itemize}
\item $\vac$ is simply the vector $1 \otimes 1$ in the tensor definition of $\Ind$.
\item $Vir_c$ has a Poincaré-Birkhoff-Witt basis
\[L_{j_1}...L_{j_m}\vac \quad j_1\le ... \le j_m < -1. \]
\item $\deg \vac=0, \deg L_n=-n$ is sufficient to give a grading on the algebra
\item $T=L_{-1}$
\item \[Y(L_{-2}\vac,z)=T(z)=\sum_{n \in \ZZ}L_nz^{-n-2}. \]
\item These are the necessary conditions for the reconstruction theorem in \ref{sec:recthm} for $S$ the singleton defining $L_{-2}\vac$ to determine the vertex algebra structure on $Vir_c$.
\end{itemize}

\subsection{Vertex operator algebras}
A graded vertex algebra $V$ is called \textit{conformal} or a \textit{vertex operator algebra} of central charge $c$ if we have a vector $\omega \in V_2$ such that the operators $L^V_n$ defined by
\[Y(\omega,z)=\sum_{n \in \ZZ}L^V_n z^{-n-2} \]
satisfy the Virasoro relations with central charge $c$; furthermore, $L^V_{-1}=T$, and $L^V_{0}|_{V_n}=n\cdot id$, relating $L_0$ to the grading.

The vector $\omega$ is called a \textit{conformal vector}.

Examples of vertex operator algebras include:
\begin{itemize}
\item $Vir_c$ itself, with $\omega=L_{-2}$.  In fact, any vertex operator algebra $V$ of central charge $c$ comes equipped with a map $f:Vir_c \rightarrow V$ such that $\omega=f(L_{-2}\vac)$, and vertex algebras equipped with such a map are precisely the vertex operator algebras.
\item The Heisenberg Fock space $\pi$ has a one-parameter family of conformal vectors: given $\lambda \in \CC$,
\[\omega_\lambda=\left(\frac{1}{2}b_{-1}^2+\lambda b_{-2}\right)\vac \]
is a conformal vector with central charge $c=1-12\lambda^2$.
\item $V_k(\gf)$ has a conformal vector in the case where $k \ne -h^\vee$, using what is called the Sugawara construction.

Given $d=\dim \gf$, pick a basis $J^1,...,J^d$ of $\gf$, and let $J_1,...,J_d$ be the dual basis of $\gf$ defined such that $(J^i,J_j)=\delta_{i,j}$ for the bilinear form defined earlier.  Define the \textit{Sugawara operator} as
\[S:=\frac{1}{2} \sum_{a=1}^d J^a_{-1}(J_a)_{-1} \vac, \]
which is independent of the basis chosen.  Then, $(1/(k+h^\vee))S$ is a conformal vector with conformal charge
\[c=\frac{k \dim \gf}{k+h^\vee}. \]
(At the \textit{critical level} $k=-h^\vee$, the operators $S_{(j)}$ mutually commute instead of forming the Virasoro algebra.)
\end{itemize}

\subsection{Vertex operator algebras associated to integral lattices}

\subsubsection{Heisenberg representations}

Recall $\Hh$ and $\Hh'$, the Heisenberg algebras, with (topological) basis given by $\one$ and $b_n \quad n \in \ZZ$, with
\begin{itemize}
\item $\one$ central
\item $[b_m,b_n]=m\delta_{m,-n}\one$.
\end{itemize}
Define the Heisenberg Weyl algebra as
\[\widetilde{\Hh}=U(\Hh')/(1-\one); \]
note that its representations are the representations of $\Hh'$ with $\one$ acting as $1$.

Fix a scalar $\lambda \in \CC$.  Define $\pi_\lambda$ to be the $\widetilde{\Hh}$-module generated by an element $|\lambda\rangle$ with relations
\begin{align*}
  b_n|\lambda\rangle&=0 \quad \forall n>0\\
  b_0|\lambda\rangle&=\lambda|\lambda\rangle;
\end{align*}
that is, let $\pi_\lambda$ be an induction of the one-dimensional $U(\CC \cdot \one \oplus \CC[[t]])$-module on which $b_0$ acts as $\lambda$.  Much like for $\pi=\pi_0$, we have a Poincaré-Birkhoff-Witt basis
\[\pi_\lambda=\CC[b_n]_{n<0}|\lambda\rangle \]
with the action of $b_i$ related to the Weyl algebra action in much the same way as $\pi_0$'s are.

Note that up to isomorphism, the irreducible graded $\widetilde{\Hh}$-modules with gradation (such that $\deg b_n=-n$) bounded below are precisely the modules $\pi_\lambda$.

In a similar process\footnote{Actually the same process, once representations are defined in \ref{sec:voareps}} to the vertex operator of the conformal vector $\omega=\frac{1}{2}b_{-1}^2\vac$ on $\pi$, there exists an action of $Vir$ on $\pi_\lambda$ given by
\[L_n = \frac{1}{2}\sum_{m \in \ZZ}:b_mb_{n-m}: \quad n \in \ZZ \]
with central charge $1$; in particular, $\deg(|\lambda\rangle)|\lambda\rangle=L_0|\lambda\rangle=\frac{1}{2}\lambda^2|\lambda\rangle$ is a canonical degree for the generating vector $|\lambda\rangle$.

\subsubsection{One-dimensional lattice vertex operator algebras}
Fix an even positive integer $N \in 2\ZZ^{>0}$.  Define
\[V_{\sqrt{N}\ZZ}:=\bigoplus_{m \in \ZZ}\pi_{m\sqrt{N}}. \]

Then $V_{\sqrt{N}\ZZ}$ carries with it a vertex operator algebra structure with $V_0=\pi_0$ as a conformal subalgebra.  We sketch a sketch of a proof of this fact.

A stronger version of the reconstruction theorem says that it is enough to define the fields $Y(|\lambda\rangle,z)=:V_\lambda(z)$ for each $\lambda \in \sqrt{N}\ZZ$.

The calculations for this will involve a pair of numbers $c_{\lambda,\mu} \in \CC$ satisfying the following equations:
\begin{align}
  c_{\lambda,0}&=1 \quad \forall \lambda \in \sqrt{N}\ZZ \label{cocycle1} \\
  c_{\lambda,\mu+\nu}c_{\mu,\nu}&=(-1)^{\lambda\mu}c_{\mu,\lambda+\nu}c_{\lambda,\nu}\quad \forall \lambda,\mu\,nu \in \sqrt{N}\ZZ.\label{cocycle2}
\end{align}
Note that the power of $(-1)$ in (\ref{cocycle2}) is in fact always equal to $1$ and so $c_{\lambda,\mu}=1$ is a valid solution; however, for multidimensional lattices, this is not necessarily true.

Denote by $S_\lambda \in \End V_{\sqrt{N}\ZZ}$ the linear map such that
\begin{align}
  S_\lambda|\mu\rangle &= c_{\lambda,\mu}|\lambda+\mu\rangle\\
  [S_\lambda,b_n] &= 0 \quad \forall n \ne 0.
\end{align}
Then, we can define $V_\lambda(z)$ as follows:
\[
V_\lambda(z)=S_\lambda z^{\lambda b_0}\exp{\left(-\lambda\sum_{n<0}\frac{b_n}{n}z^{-n} \right)} \exp{\left(-\lambda\sum_{n>0}\frac{b_n}{n} z^{-n}\right)}.
\]
Note that the sum over $n>0$ consists of terms that, for every element of $V_{\sqrt{N}\ZZ}$, will be eventually zero, and so the exponentiation makes sense; the $z^{\lambda b_0}$ term makes sense, as for any $\mu \in \sqrt{N}\ZZ$, $\mu\lambda \in \ZZ$.  The condition (\ref{cocycle1}) arises from confirming the vacuum axiom, and the condition (\ref{cocycle2}) arisis from confirming the locality axiom.
\subsubsection{Lattice vertex operator algebra for more general lattices}
Let $L$ be a lattice of finite rank, equipped with a bilinear form
\[(-,-):L \times L \rightarrow \ZZ \]
such that
\[(\lambda,\lambda)\in 2\ZZ^{>0} \quad \forall \lambda \ne 0. \]
Set $\hh=L \otimes_\ZZ \CC$; $\hh$ has an inner product induced by the inner product on $L$.

Define the multidimensional Heisenberg Weyl algebra $\widetilde{H}_L$ as the algebra generated by
\[h_n \quad h\in \hh, n \in \ZZ \]
with the following relations:
\begin{itemize}
\item For fixed $n$, the linear structure of $\hh$ applies to the elements of $h_n$; that is, only a basis for $\hh$ is needed as generators.
\item \[[h_n,g_m]=n(h,g)\delta_{n,-m}\quad \forall g,h \in \hh; m,n \in \ZZ. \]
\end{itemize}
There is always an isomorphism $\widetilde{H}_L \simeq \widetilde{H} \otimes ... \widetilde{H}$, where the number of tensor factors is equal to the rank of $L$.

For each $\lambda \in L$, there is a $\widetilde{H}_L$-module $\pi_\lambda$, generated by $|\lambda\rangle$ with relations
\begin{itemize}
\item $h_n|\lambda\rangle=0 \quad n>0$
\item $h_0|\lambda\rangle=(\lambda,h)|\lambda\rangle,$
\end{itemize}
as one might expect the multi-dimensional generalization to be.  Similarly, $\pi_0$ still carries a vertex algebra structure.

Define
\[V_L=\bigoplus_{\lambda \in L}\pi_\lambda, \]
with the grading such that $\deg(h_n)=-n$ and $\deg(|\lambda\rangle)=\frac{1}{2}(\lambda,\lambda)$.

To define a vertex operator algebra structure on $V_L$, we will need coefficients $c_{\lambda,\nu} \in \CC$ for $\lambda,\nu \in L$ satisfying:
\begin{align}
  c_{\lambda,0}=c_{0,\lambda}&=1 \label{latcocyc1}\\
  c_{\lambda,\mu}&=(-1)^{(\lambda,\mu)}c_{\mu,\lambda} \label{latcocyc2}\\
  c_{\mu,\nu}c_{\mu+\nu,\lambda}&=c_{mu,\nu+\lambda}c_{\nu,\lambda}. \label{latcocyc3}
\end{align}
Assume that $c_{\lambda,\mu} \ne 0 \forall \lambda,\nu \in L$.  Then, (\ref{latcocyc1}) and (\ref{latcocyc3}) imply that the function $L \times L \rightarrow \CC^\times$ given by the coefficients of $c$ is a $2$-cocycle of $L$ with coefficients in $\CC^\times$.  Scaling $|\lambda\rangle$ by $a_\lambda$ yields the scaling
\[c_{\lambda,\mu} \mapsto a_\lambda a_\mu a_{\lambda+\mu}^{-1} c_{\lambda,\mu}, \]
which scales $c$ by a coboundary.

Therefore, solving (\ref{latcocyc1}-\ref{latcocyc3}) is equivalent, up to scaling of the $|\lambda\rangle$s, to finding an element of $H^2(L,\CC^\times)$ satisfying (\ref{latcocyc2}).  As $L$ is an abelian group, we know $H^2(L,A) \simeq \Lambda^2L^* \otimes A$ for any abelian group $A$, and that this isomorphism is determined precisely by the values forced by (\ref{latcocyc2}).  From this, we can show that not only is it possible to find such a set of values, and that they are unique up to scaling, but that with the correct scaling we can set $c_{\lambda,\mu}=\pm 1 \quad \forall \lambda,\mu$.

The conformal vector of $V_L$ is
\[\omega=\frac{1}{2} \sum_{i=1}^{\dim \hh}(h_i)_{-1}(h^i)_{-1}, \]
where $\{h_i\}$ and $\{h^i\}$ are dual bases of $\hh$ using $(-,-)$.
\subsubsection{Relation between Kac-Moody and lattice vertex algebras}
Let $L$ be a lattice of type $ADE$ and $\gf$ be the corresponding simple Lie algebra.  Let $\ghat$ be the corresponding affine Lie algebra to $\gf$.  Consider the vertex operator algebra $V_L$.

The multidimentional Heisenberg Weyl algebra $\widetilde{H}_L$ acts on $V_L$, and we also have fields corresponding to the lattice elements; for $\lambda \in L$, write
\[Y(|\lambda\rangle,z)=\sum_{j \in \ZZ}v^{(j)}_\lambda z^{-j-1}. \]

Then, there is a morphism $\sigma: \ghat \rightarrow \End(V_L)$ given by:
\begin{align}
  K &mapsto 1\\
  u \otimes t^n &\mapsto u_n \quad u \in \hh, n \in \ZZ\\
  E_\alpha \otimes t^n &\mapsto v^{(n)}_\alpha \quad \alpha \in \Delta, n \in \ZZ.
\end{align}
The vertex operator algebra $V_L$ will be a quotient of the vertex operator algebra $V_1(\gf)$, and in fact will be the simple quotient $L_1(\gf)$.

Conversely, it is possible to extract a definition for $\gf$ from $V_L$: note that
\[(V_L)_1 = \hh \vac \oplus \bigoplus_{(\lambda,\lambda)=2}|\lambda\rangle, \]
and that locality and associativity will imply the Jacobi identity for the bracket
\[[g,h]=g_{(0)}h \quad g,h \in V_1 \]
for any vertex operator algebra $V$.  Note that the approach in \cite{MR1854697}, also using a double cover, can in fact be derived from the vertex operator approach.
\section{Operadic approach to vertex algebras (Ben West, May 4)}

\subsection{Moduli space of binary trees}
For the purposes of this talk, we define a \textit{binary tree} as follows:
\begin{itemize}
\item A \textit{leaf} is simply a label, with no children.
\item A \textit{internal node} is a label with two children, labeled the \textit{left} and \textit{right} children
\item A \textit{node} is either a leaf or an external node.
\item A \textit{tree} is an object consisting of:
  \begin{itemize}
  \item A distinguished node called the \textit{root}.
  \item The set of the root's descendants (recursive completion of its children), which we require to be finite.
  \item A total ordering on the leaves of the tree.
  \end{itemize}

\end{itemize}
An important order on the leaves is an order confusingly called the \textit{preorder on the leaves}(\tk or maybe just the order induced by the preorder?  If there's a better name than preorder, and literally almost anything is better, I'll use that): it is the order such that, if $l$ and $r$ are descendants of the left and right child of any particular node, then $r<l$.

We say that two trees are \textit{equivalent} if there is a bijection on their nodes preserving the tree structure as well as the ordering on the leaves; that is,
\[\left.\Tree[ 1 2 ] \right. \ne \left.\Tree[ 2 1 ] \right. , \]
where we denote the ordering on the leaves by labelling them with integers and inducing the standard order on these integers.

We say that a tree has \textit{size $n$} if it has $n$ internal nodes; that is, if it has $n+1$ leaves.  The \textit{moduli space of trees of size $n$}, denoted $B_n$, is simply the set of trees\footnote{To avoid worrying about set theory, pull all labels from your favorite infinite ``label set''.  If you don't have a favorite, just use $\ZZ$.} of size $n$, modulo equivalence.  The set $B_n$ has an action from the symmetric group $\Sym_{n+1}$, permuting the ordering on the leaves.

Denote the moduli space of all binary trees as
\[B=\bigcup_{n \ge 1}B_n. \]

\subsection{Operations on $B$}
Let $T_1$ be a tree of size $m$, $T_2$ a tree of size $n$, and $1 \le i \le m+1$.  Then, define the tree $T_1 \cdot_i T_2$ to be the tree you get when you ``weld'' $T_2$ onto the $i$th node (using the order) of $T_1$, ordered as follows: if $T_1$ has ordering $(p_1,...,p_{m+1})$ and $T_2$ ordering $(q_1,...,q_{n+1})$, then $T_1 \cdot_i T_2$ has ordering
\[(p_1,...,p_{i-1},q_1,...,q_{n+1},p_{i+1},...,p_{m+1}). \]
For example,
\[ \left. \Tree[ [ 3 2 ] [ [ 4 5 ]  1 ] ] \right.  \cdot_4  \left. \Tree[ 3 [ 2 1 ] ] \right. = \left. \Tree[ [ 3 2 ] [ [ [ 6 [ 5 4 ] ] 7 ]  1 ] ] \right..
\]

Let $T$ be a tree of size $n$; note that there is a permutation $\sigma_T \in \Sym_{n+1}$ such that $\sigma_T(T)$ is in the preorder.  Let $p$ be an internal node of $\sigma_T(T)$.  We can cut $\sigma_T(T)$ into two trees:
\begin{itemize}
\item $T_p^+$ consists of all nodes that are \textit{not} proper descendants of $p$.
\item $T_p^-$ consists of $p$ and all nodes that are descendants of $p$.
\end{itemize}
Given these two trees, there exists some $i$ such that
\[\sigma_T(T) = T_p^+ \cdot_i T_p^-. \]

If $p$ is an internal node of $T$, denote by $\widetilde{T}_p$ the tree defined by switching $p$'s left and right children; e.g.
\[\Tree[ 1 2 ] \rightsquigarrow \Tree[ 2 1 ]. \]

There exists another operation which glues internally.  Let $T$ be a tree, $p$ a node of $T$, and $i,e$ be labels \textit{not} in $T$.  Then, let $T^{(i,e)}_p$ be the tree that makes the replacement (\tk this looks really bad; I'm not sure qtree really matches what I need here)
\[p \rightsquigarrow \left. \Tree [.i p e ] \right. ; \]
that is, $p$ still has any same children as it had, but if $p$ was the child of a node, that node's corresponding child is now $i$, and if $p$ was the root, then the root is now $i$.  Furthermore, order the tree such that $e$ is at the end.  For example,

\[\Tree [ [ * * ] [ [.p * * ] * ] ] \rightsquigarrow \Tree [ [ * * ] [ [.i [.p * * ] e ] * ] ] \]

\subsection{Geometric Lie Algebras}
For the rest of this section, let $F$ be a field of characteristic $0$.

Let $V$ be a finite dimensional vector space over $F$.  Define $\Ff_n:=\Ff_n(V,F)$ to be the space of linear functionals on $V^* \otimes V^{\otimes n-1}$.  Define
\[\Ff := \bigcup_{n \ge 3} \Ff_n. \]
Note that $\Sym_{n-1}$ acts on $\Ff_n$ by permuting the $V$ tensors.

We define a ``welding product'' for these functionals as follows: Let $I$ be a finite index set, $\{e_i\}_{i \in I}$ a basis for $V$, and $\{e^*_i\}_{i \in I}$ the corresponding dual basis for $V^*$.  For $f \in \Ff_m, g \in \Ff_n, 1 \le k \le m-1$, we define $f *_k g \in \Ff_{m+n-2}$ as
\[ (f *_k g)(v^* \otimes v_1 \otimes ... \otimes v_{m+n-3}) = \sum_{i \in I}f(v^* \otimes v_1 \otimes ... \otimes v_{k-1} \otimes e_i \otimes v_{n+k+1} \otimes ... \otimes v_{m+n-3}) g(e^*_i \otimes v_k \otimes ... \otimes v_{n+k-2}). \]
This is independent of the basis chosen.

With this structure, we can define the geometric Lie algebra.  A \textit{geometric Lie algebra} is a finite-dimensional vector space $V$ over $F$ equipped with a map $\nu: B \rightarrow \Ff$ such that $\nu(B_n) \subseteq \Ff_{n+2}$, satisfying four axioms:
\begin{enumerate}
\item Chirality: Given $T \in B$, $p$ an internal node of $T$:
\[\nu(\widetilde{T}_p)=-\nu(T). \]
\item Conservation: Given $T \in B_n$, denote the root as $r$ and the leaves as $p_1,...,p_{n+1}$.  We have
\[\nu(T^{(i,e)}_r)=\sum_{j=1}^{n+1}\nu(T^{(i,e)}_{p_j}). \]
\item Permutation: If $\sigma \in \Sym_{n+1}, T \in B_n$,
\[\nu(\sigma(T))=\sigma(\nu(T)) \]
\item Welding: Given $T_1,T_2 \in B$,
\[\nu(T_1 \cdot_i T_2)=\nu(T_1) *_i \nu(T_2) \]
\end{enumerate}
A homomorphism of geometric Lie algebras $\eta: (V_1,\nu_1) \rightarrow (V_2,\nu_2)$ is a map $\nu: V_1 \rightarrow V_2$ of vector spaces such that
\[\nu_2(T)(w^* \otimes \nu(v_1) \otimes ... \otimes \nu(v_{n+1}))=\nu_1(T)(\nu^*(w^*) \otimes v_1 \otimes ... \otimes v_{n+1}). \]

Given the name, one would expect the categories of geometric Lie algebras and of Lie algebras to be similar.  In fact, the category of geometric Lie algebras is \textit{isomorphic} to the category of finite-dimensional Lie algebras!

To construct this isomorphism, first note that $B_1=\{\Lambda,\widetilde{\Lambda}\}$, where
\[\Lambda=\Tree[ 2 1 ]; \quad \widetilde{\Lambda}=\Tree[ 1 2 ]. \]

Let $V$ be a Lie algebra with bracket denoted $[,]$.  Then, define $\nu$ on $B_1$ as follows:
\begin{align}
  \nu(\Lambda)(v^* \otimes v_1 \otimes v_2)&=\langle v^*,[v_1,v_2] \rangle\\
  \nu(\widetilde{\Lambda})(v^* \otimes v_1 \otimes v_2)&=\langle v^*,[v_2,v_1] \rangle.
\end{align}
The permutation axiom between $\Lambda$ and $\widetilde{\Lambda}$ holds rather automatically.

The antisymmetry of the Lie bracket implies the chirality axiom.  The Jacobi identity implies the conservation axiom for $\Lambda$ and $\widetilde{\Lambda}$.

Define $\nu$ for other trees by recursively applying the welding and permutation axioms; then, the only axiom remaining to check is the general conservation axiom, which can be proven by induction on the size of the tree as follows: Let $T \in B_n$ and denote its root by $r$.  $r$ will have two children, $c_1$ and $c_2$; $c_i$ and its descendants compose the tree $S_i$; note that both $S_1$ and $S_2$ will be smaller.  By the conservation axiom for $\Lambda$, we have
\[\nu(T^{(i,e)}_r)=\nu(T^{(i,e)}_{c_1})+\nu(T^{(i,e)}_{c_2}), \]
and applying the axiom to $S_1$ and $S_2$ will complete the proof of the axiom.

Conversely, $\nu(\Lambda):V^* \otimes V \otimes V \rightarrow F$ induces a bracket $[,]: V \otimes V \rightarrow V$ satisfying the necessary axioms.
\subsection{Geometric vertex operator algebras}
\label{sec:geomvoa}
To work with vertex operator algebra formalisms, we now require a more truly geometric, $2$-dimensional structure than the combinatorial structure used to define a geometric Lie algebra.  The structure we work with is called the moduli space of spheres with tubes.

The sphere, in this context, is simply $S^2=\CP^1$, the complex projective line.  A \textit{sphere with $n$ tubes} consists of the following structure:
\begin{itemize}
\item A sphere $\CP^1$,
\item Distinct oriented points $p_0,...,p_{n-1} \in \CP^1$ called \textit{punctures} such that $p_0$ is negatively oriented and $p_1,...,p_{n-1}$ are positively oriented,
\item and local analytic coordinates vanishing at each puncture.
\end{itemize}
We say that two spheres with tubes are \textit{conformally equivalent} if there exists a complex-analytic diffeomorphism preserving all structure but the local analytic coordinates.  Define the moduli space to be the set of conformal equivalence classes of spheres with $n$ punctures; denote it $K(n-1)$.

Let $P \in K(m)$ with punctures $p_0,...,p_m$; let $Q \in K(n)$ with punctures $q_0,...,q_n$.  We would like to be able to glue $P$ to $Q$ at the $i$th positive puncture; this is not always possible, but when it is, it can be done as follows:

Cut discs of reciprocal radii around $p_0$ and $q_i$ containing no other punctures; this step is not always possible.  Afterwards, glue them together using $z \mapsto 1/z$; when this is possible, the result is unique, and defines a partial function (not an actual function)
\[\infty_i : K(m) \times K(n) \rightarrow K(m+n-1). \]

Given a graded vector space $V=\bigoplus_{n \in \ZZ}V_n$, define the graded dual and completion as follows:
\begin{align}
  V^\vee&=\bigoplus_{n \in \ZZ}V^*_{(n)}\\
  \overline{V}&=\prod_{n \in \ZZ}V_{(n)}=(V^\vee)^*.
\end{align}
(Note that the ``direct sum'' of an infinite number of vector spaces is really a coproduct and especially in this context should be thought of as such)
Define $\Hh_V(n)=\hom(V^{\otimes n},\overline{V}$.

For $m>0, n \ge 0, 1 \le i \le m$, define the \textit{contraction}
\begin{align}
  \Hh_V(m) \times \Hh_V(n) &\rightarrow \hom(V^{\otimes m+n-1},\overline{V}[[t^\pm 1]])\\
  (f,g) &\mapsto (f *_i g)_t
\end{align}
as follows:
\[(f*_ig)_t(v_1 \otimes ... \otimes v_{n+m-1} = \sum_{k \in \ZZ}t^kf(v_1 \otimes ... \otimes v_{i-1} \otimes P_k(g(v_i \otimes ... \otimes v_{i+n-1})) \otimes v_{i+m} \otimes ... \otimes v_{m+n-1}), \]
where $P_k$ is the projection operator onto the $k$th factor.

If $\langle v^\vee,(f*_ig)_t(v_1 \otimes ... \otimes V_{m+n-1})\rangle$ is absolutely convergent for $t=1$ and all $v^\vee \in V^\vee$, then define
\[f*_ig=(f*_ig)_1 \in \Hh_V(m+n-1). \]

A \textit{geometric vertex operator algebra} is a $\ZZ$-graded $\CC$-vector space

\[V = \bigoplus_{n \in \ZZ} V_n \quad \dim V_n < \infty \]
and a series of maps
\[\nu_n: K(n) \mapsto \Hh_V(n) \]
satisfying:
\begin{enumerate}
\item Positive energy: $V_n=0$ for $n$ sufficiently small
\item Grading axiom: If $v^\vee \in V^\vee, v \in V_n, a \in \CC^\times$, then
  \[\langle v^\vee,\nu_1(0,(a,0))(v)\rangle = a^{-n}\langle v^\vee,v \rangle. \]
\item Meromorphicity: A function on $K(n)$ of the form
  \[Q \mapsto \langle v^\vee, \nu_n(Q)(v_1 \otimes ... \otimes v_n) \rangle \quad v^\vee \in V^\vee, v_i \in V \]
  is called a \textit{correlation function}.  These functions should:
  \begin{itemize}
  \item Be meromorphic.
  \item Have no poles outside of $z_i=z_j$.
  \item At $z_i=z_j$, the order of the pole should be bounded by a function $N(v_i,v_j)$.
  \end{itemize}
\item Permutation axiom: If $\sigma \in \Sym_n, Q \in K(n)$, then
\[\sigma(\nu_n(Q))=\nu_n(\sigma(Q)). \]
\item Sewing axiom: If $Q_1 \in K(m), Q_2 \in K(n)$, and the $i$th positive puncture of $Q_1$ can be sewn to the negative puncture of $Q_2$, then $\nu_m(Q_1) *_i \nu_n(Q_2)$ exists and
\[\nu_{m+n-1}(Q_1 \infty_i Q_2) = \nu_m(Q_1) *_i \nu_n(Q_2) \cdot e^{-\Gamma(Q_1^{(i)},Q_2^{(0)},q_1^{(i)}) \cdot c}, \]
where $c$ is the central charge and
\[\Gamma(A,B,\alpha_0) \equiv \sum_{j=0}^\infty\frac{j^3-j}{12}\alpha_0^{-j}A_jB_j \pmod{A^2B+B^2A} \]
is a power series in two local coordinates specifically chosen such that the Virasoro vertex algebra with central charge $c$ becomes a vertex algebra. (\tk I think this is what Huang is saying; in my notes and I think in the talk it was simply written as ``stuff'') 
\end{enumerate}
Theorem (5.4.5, 7.2.2 in Huang's 2d conformal geometry): This category is isomorphic to the category of vertex operator algebras.

Note that all the structures in this section were, despite not using the terms, examples of (partial) operads. For more on operads, see \cite{MR1898414}.
\section{Factorization algebras (Pax Kivimae, May 11)}
A similar idea to that of a vertex algebra is a construction called the factorization algebra, which is a particular sort of algebra defined as a sheaf on an algebraic curve $X$.  In fact, the quasi-conformal vertex algebras are equivalent to universal factorization algebras.  Both can be related to another construction called chiral algebras, which are defined as $\Dd$-modules equipped with a product similar to a Lie bracket.

(\tk \tk this is going to be the section I have the most trouble reproducing well.  It should probably get a once-over by Pax or someone better at factorization algebras.  I should also probably check out the second edition of the book since the first doesn't have a factorization algebras chapter)

\subsection{Operations on sheaves}
Note that for the remainder of this section, the sheaves we refer to are quasicoherent sheaves.

Fix $X$ a smooth, (usually projective) algebraic curve over $\CC$.  Let $\Mm$ and $\Nn$ be sheaves on $X$, and $\Ff$ a sheaf on $X^2$, and fix $\Omega_X$ the cotangent line bundle.  Then,
\[\Mm \boxtimes \Nn = \pi_1^* \Mm \otimes_{\Oo_{X^2}} \pi_2^* \Nn \]
is the ``external tensor product'' of $\Mm$ and $\Nn$, and is a sheaf on $X^2$.

Let $\Delta: X \rightarrow X^2$ be the diagonal map, then the pushforward is the extension by zero
\[\Delta_*\Mm=\Mm \otimes_{\Oo_X} \Oo_{X^2}. \]

The inclusion of the complement of the diagonal is denoted by $j : X^2 \setminus \Delta \rightarrow X^2$.  The sheaf of functions on $\Ff$ with poles at the diagonal is denoted
\[\Ff(\infty \Delta) = j_*j^*\Ff = \lim_\rightarrow \Ff(n\Delta). \]

The space of $\Mm$-valued $\delta$ functions relates closely to the exceptional pushforward
\[\Delta_!(\Mm)=\frac{\Omega_x \boxtimes \Mm (\infty \Delta)}{\Omega_X \boxtimes \Mm} \]
using the map
\[\frac{dz \boxtimes f}{(z-w)^n} \mapsto \frac{1}{(n-1)!} \partial^{n-1}_z \delta(z-w) \boxtimes f. \]

There is a surjective map
\[\Res: \Delta_!\Mm \rightarrow \Delta_*\Mm \]
that provides an isomorphism $\Delta_*\Mm=\Delta_!\Mm/\im(d \otimes 1)$.  It is also useful to have a non-$\Omega$-based version of the exceptional pushforward
\[\Delta_+=\frac{\Oo_X \otimes \Mm(\infty \Delta)}{\Oo_X \otimes \Mm}. \]
Since $X$ is one-dimensional (in a complex sense), the cotangent bundle $\Omega_X = \omega_X$ is also the canonical bundle, and there is an isomorphism between left and right $\Dd$-modules as follows:
\[\Ff \mapsto \Ff \otimes \Omega_X. \]
Finally, note that the transposition map $T: X^2 \rightarrow X^2; (x,y) \mapsto (y,x)$ will anticommute with the residue map; that is,
\[T \circ \Res \circ T = - \Res. \]
\subsection{Cousin complex}
The complexes the Cousin complex is based on involve a series of sheaves on a filtration that is almost, but not actually, satisfying
\[Z \supseteq Z_0 \supset ... Z_n \textrm{ \textcolor{red}{does not happen}.} \]

What the series of $Z_i$ actually does satisfy is the relation
\[\overline{Z_i} \supseteq \overline{Z_{i+1}}, \]
and an exact sequence
\[0 \rightarrow \Ff \rightarrow \Ff_0 \rightarrow \Ff_1 ... \rightarrow \Ff_n \rightarrow 0. \]
of sheaves on $Z$ such that
\[supp(\Ff_{i+1}) \subseteq \overline{Z_i}. \]

The first case is $Z=X^2$, with the filtration $X^2 \supset \Delta$ and $\Ff=\omega_X^{\boxtimes 2}$:
\[0 \rightarrow \omega_X \boxtimes \omega_X \rightarrow \omega_X \boxtimes \omega_X (\infty \Delta) \rightarrow \Delta_!(\omega_x) \rightarrow 0. \]

Next, we let $Z=X^3$, define the different diagonals as $\Delta_{ij}=\{(x_k) \in Z|x_i=x_j\}$ and so forth, and start with $\Ff=\omega_X^{\boxtimes 3}$:
\[0 \rightarrow \omega_X^{\boxtimes 3} \rightarrow \omega_X^{\boxtimes 3}\left(\infty \bigcup \Delta_{ij} \right) \rightarrow \bigoplus_{ij} \Delta_{ij!}(\omega^{\boxtimes 2}(\infty \Delta_{ij})) \rightarrow \Delta_{123!}\omega_X \rightarrow 0. \]
Define the map
\[\mu_{(12)3}: \omega_X^{\boxtimes 3}\left(\infty \bigcup \Delta_{ij}\right) \rightarrow \Delta_{123!}\omega_X \]
as the composition of the two maps factoring through $\Delta_{12!}\omega^{\boxtimes 2}(\infty \Delta_{12})$, and similarly the other combinations.  Up to signs (though the $\Sym_3$ symetry matches that of the regular Jacobi), we have
\[\mu_{(12)3}+\mu_{(23)1}+\mu_{(31)2}=0, \]
which is a Jacobi identity, much like for Lie algebras.
\subsubsection{Crystals, $\Dd$-modules, and the symmetry of $\Delta_!$}
Recall Taylor's identity,
\[f(z)=\sum_{k=0}^\infty \frac{(z-w)^k}{k!} (\partial_w^kf)(w)=e^{(z-w)\partial_w}f(w). \]
Now, conisder the transposition of $\Delta_!\Mm$:
\[T_*\Delta_!\Mm=\frac{\Mm \boxtimes \Omega(\infty \Delta)}{\Mm \boxtimes \Omega}. \]
This is not the same sheaf as $\Delta_!\Mm$, but in the case where $\Mm$ is a $\Dd$-module, it can be related: Let $\widehat{\Delta}$ be the formal completion of $X^2$ around $\Delta$.  Then, if $\Mm$ is a $\Dd$-module, there is an isomorphism
\begin{align}
  \widehat{\Delta}^*(\Oo \boxtimes \Mm) &\rightarrow \widehat{\Delta}^*(\Mm \boxtimes \Oo)\\
  1 \otimes \psi(z)(z-w)^k &\mapsto e^{(z-w)\partial_w}(\psi(w) \otimes 1)(z-w)^k.
\end{align}
In fact, a map between those two sheaves restricting to the identity on $\Delta$ is equivalent to a $\Dd$-module structure on $\Mm$.  This map can be extended to $\Delta_+$:
\begin{align}
  \frac{\Oo \boxtimes \Mm (\infty \Delta)}{\Oo \boxtimes \Mm} &\rightarrow \frac{\Mm \boxtimes \Oo (\infty \Delta)}{\Mm \boxtimes \Oo}\\
  (1 \boxtimes \psi)(z-w)^{-k} \mapsto e^{(z-w)\partial_w}(\psi \boxtimes 1)(z-w)^{-k}=\sum_{n=0}^{k+1}\left(\frac{\partial_w^n}{n!}(\psi \boxtimes 1)(z-w)^{-k}\right)(z-w)^n.
\end{align}

A similar construction can be made to identify $\Delta_!\Mm \rightarrow T_*\Delta_!\Mm$, using the isomorphism between left and right $\Dd$-modules.
\subsection{Chiral algebras}
\label{sec:chiraldef}
A \textit{chiral algebra} consists of the following data:
\begin{itemize}
\item $\Aa$, a $\Dd$-module on $X$.
\item $\mu: \Aa \boxtimes \Aa (\infty \Delta) \rightarrow \Delta_! \Aa$
\item An ``identity map'' $\varepsilon: \Omega_X \rightarrow \Aa$.
\end{itemize}
satisfying the following axioms:
\begin{itemize}
\item $\mu$-antisymmetry: $T \circ \mu \circ T=-\mu$
\item Jacobi relation: $\mu_{(12)3}+\mu_{(23)1}+\mu_{(31)2}=0$.
\item Identity property:
\[
  \begin{tikzcd}
    \Omega \boxtimes \Aa (\infty \Delta) \arrow[r,"\varepsilon \otimes 1"] \arrow[d,"\textrm{defining quotient}"] & \Aa \boxtimes \Aa (\infty \Delta) \arrow[d,"\mu"]\\
    \Delta_!(\Aa) \arrow[r,"id"] & \Delta_!(\Aa)
  \end{tikzcd}
\]
commutes.
\end{itemize}
A \textit{universal chiral algebra} is an assignment $X \mapsto \Aa_X$ for every smooth projective algebraic curve over $\CC$ such that for every étale map $f: X' \rightarrow X$ we have $f^*(\Aa_X) \simeq \Aa_{X'}$.

We would like to be able to relate quasiconformal vertex algebras (a superset of conformal vertex algebras) to universal chiral algebras, via conformal blocks (which will be explained more in (\ref{sec:confblocks}); note that \cite{MR2082709} actually introduces conformal blocks first).  To do this, we use the Virasoro action of a conformal vertex algebra to produce a vector bundle.

Given any algebraic curve $X$ and any (geometric) point $x \in X$, the completed local ring $\widehat{\Oo_{X,x}}$ is isomorphic to the abstract ring $\CC[[z]]$.  The space
\[\Aut_X=\{(x,f_x)|x \in X, f_x: \CC[[z]] \overset{\sim}{\rightarrow} \widehat{\Oo_{X,x}} \} \]
has a canonical map $\Aut_X \rightarrow X$ making a bundle with fiber
\[Aut_x := \Aut_{X,x} = \{f_x: \CC[[z]] \overset{\sim}{\rightarrow} \widehat{\Oo_{X,x}} \} \]
and a canonical action of the group $\Aut(\CC[[z]])$.

A vertex operator algebra $V$ has an action of $\Der(\CC[[z]])$ induced by its action of $Vir$.  To exponentiate this to an action of $\Aut(\CC[[z]])$, we use the fact that an element of $\Aut(\CC[[z]])$ is defined as
\[z \mapsto f(z) \quad f(z)\in cz+z^2\CC[[z]] \quad c \in \CC^\times. \]

Such a function $f(z)$ can be re-expressed as
\[f(z)=\exp{ \left(\sum_{i>0}v_iz^{i+1}\partial_z \right)} c^{z\partial_z}z, \]
which lets us act on $v \in V$ as
\[\rho(f) \cdot v=\exp{ \left(-\sum_{i>0}v_iL_i \right)}c^{-L_0}z, \]
the first term being coherent as the action of $L_i$ is locally nilpotent for $i>0$ and the second term being coherent as the action of $L_0$ is always an integer.  Given this action, we define the vector bundle on $X$
\[\Vv_X=\Aut_X \times_{\Aut \CC[[z]]} V. \]
Note that $\Vv_X$ is a coordinate-independent definition of the vertex algebra; furthermore, there is a natural $\Dd$-module structure induced by the connection $\nabla = \partial_z + L_{-1}$.  Finally, we can define a map of $\Dd$-modules
\begin{align}
  \mu: \Vv_X \boxtimes \Vv_X (\infty \Delta) &\rightarrow \Delta_+(\Vv_X)\\
  A(z) \otimes B(w) &\mapsto Y(A,z-w)\cdot B.
\end{align}
That this is in fact a $\Dd$-module map follows from the translation axiom.  That $\mu$ is symmetric follows from
\[Y(A,z-w)B=e^{(z-w)T}Y(B,w-z)A. \]
Iterating the map $\mu$ to get a map corresponding to the earlier $\mu_{(12)3}$ and two similar others; a Jacobi identity can be found from this as well.  Finally, we switch from a left to a right $\Dd$-module with
\[\Aa = \Vv \otimes \omega_X \quad \mu' = \mu \otimes \mu_\omega, \]
which, with the induced map from $\CC \otimes \vac \rightarrow V$ producing the desired map $\varepsilon$.
\subsection{Factorization Algebras}

\subsubsection{Ran spaces}
The Ran space can be defined as
\[Ran(X) = \{s \in P(X) | \ |s|<\infty \}, \]
the space of finite subsets of $X$.  The topology of $Ran(X)$ can be defined such that for any set $I$ such that $|I|<\infty$, the map
\[i_I: X^I \rightarrow Ran(X) \]
is continuous, where $X^I$ denotes maps $I \rightarrow X$.

Given a surjective map $f: J \rightarrow I$, we can define a diagonal and its complement
\[\Delta_{J/I}: X^J \rightarrow X^I \quad j_{J/I}: X^J \setminus \Delta_{J/I} \rightarrow X^J \]
based on the pullback of $f$.

(\tk in my notes, some sheaf identities without context and I think with errors.  Will definitely need to check this further in the second edition of Ben-Zvi and Frenkel.)

However, $Ran(X)$ does not have the correct properties for algebraic sheaves to be defined on it; instead, we say a ``sheaf on $Ran(X)$'' to mean a \textit{collection} of sheaves $\Ff_I$ on $X^I$ with $\Delta_{J/I}^*\Ff_J=\Ff_I$, which satisfies similar properties.

\subsubsection{Definition}
A \textit{factorization algebra} is a sheaf $\Ff$ on $Ran(X)$ and a section $1 \in \Ff_1(X)$ as follows:

(\tk I cannot understand my notes here and not a single book about this topic seems to actually be in the reading room so this almost certainly has some errors in it.  I'd like Pax to look it over but of course he's an undergrad so his email address is the only one I don't have)

$\Ff$ has no sections supported on any subdiagonal, and there is an isomorphism
\[\phi_{J/I}: j_{J/I}^*(\Ff_J) \rightarrow j_{J/I}^*(\boxtimes_{i \in I}\Ff_{f^{-1}(i)}). \]
(\tk my notes say $\Ff_I$ for that $\FF_J$ but the latter is the one that makes basic sense; also there's no bigboxtimes so the notation is a stopgap)

The functions $\phi_{J/I}$ should be functorial (\tk my notes say just ``Functoriality of $\phi_{J/I}$'' without any other mention of $\phi$ so I assume it's the aforementioned isos but not completely sure), and the unit works as follows: for any $f \in \Ff_1(U)$, the value \[1 \boxtimes f \in \Ff_1(U) \boxtimes \Ff_1(U) \subseteq \Ff_1 \boxtimes \Ff_1(U^2 \setminus \Delta) \simeq \Ff_2(U^2 \setminus \Delta)\] will correspond to a value
\[g \in \Ff_2(U^2) \subseteq \Ff_2(U^2 \setminus \Delta) \]
such that \[\phi_{2/1}(g|_{U^2 \setminus \Delta})=(1 \boxtimes f)|_{U^2 \setminus \Delta}\] and
\[\Delta_{2/1}^*(g)=f, \]
the first statement being like ``$g=1 \boxtimes f$'' and the second being the identity axiom for $1$.

The value $1 \in \Ff_1(X)$ induces a map of sheaves $\Oo_X \rightarrow \Ff_1$, which can also be thought of as the identity similarly.  Using this, we can create two injections
\[\Ff_1 \boxtimes \Oo_X \rightarrow \Ff_2 \leftarrow \Oo_X \boxtimes \Ff_1; \]
when restricted to $\widehat{\Delta}$, these become isomorphisms and result in a canonical $\Dd$-module structure on $\Ff_1$; the maps $\phi_{J/I}$ will allow us to put these structures on $\Ff_n$ as well.

Finally, one can create a short exact sequence
\[0 \rightarrow \Ff_2 \rightarrow \Ff_1 \boxtimes \Ff_1 (\infty \Delta) \rightarrow \Delta_+(\Ff_1) \rightarrow 0, \]
which lets us create a chiral bracket on $\Aa = \omega_X \otimes \Ff_1$; the Cousin complex will be solvable by means of similar operations on $\Ff_3$.

The reverse functor, from chiral algebras to factorization algebras, involves the Chevalley-Cousin complex.

(Rouquier, I think, mentioned something about a canonical chiral algebra (de Rham) relating to string theory/elliptic cohomology but that's all I wrote about this and I'm not sure it really fits in)

(definition of factorization \textit{space})

\section{Conformal blocks (W. Schlieper, May 18)}
\label{sec:confblocks}
Recall from section (\ref{sec:chiraldef}) the definition of the vector bundle $\Vv_X$ for a vertex operator algebra $V$.  In addition, it's possible to define $\Yy_X$ an $\End{\Vv_x}$-valued section on $\Vv^*$; that is, for $a \in \Vv_x, \varphi \in \Vv^*_x$, and $s$ a section of $\Vv_x$ on $\Dd_x$ (i.e. $s \in V \otimes \widehat{\Oo_{X,x}}$), we have, given $s=Bf(z)$ under an isomorphism $\Oo_{X,x}\rightarrow \CC[[z]]$,
\[\langle \varphi,\Yy_x(s)a \rangle \mapsto \langle \varphi,Y(B,z)a \rangle f(z) \]
under that same isomorphism.

Equivalently, there is a dual 
\[\Gamma(D_x,\Omega \otimes \Vv_x) \rightarrow \End(\Vv_x) \]
defined by, after using the isomorphism,
\begin{align}
  A f(z) dz &\mapsto \Res_x(\langle -,Y(A,z)dz - \rangle f(z))\\
  Az^n dz &\mapsto A_{(n)}.
\end{align}
Note that the sheaf $\Omega \otimes \Vv_X$ is in fact the chiral algebra corresponding to $\Vv$.

As well, recall the connection
\[\Vv_X \overset{\Delta}{\rightarrow} \Omega \otimes \Vv_X \]
defined as
\[\Delta = d+L_{-1}=d+T; \]
similarly, $\Vv^*_X$ has the connection $d-L^*_{-1}$, under which $\Yy_X$ will be horizontal.

\subsection{Definition of conformal blocks}
Let $X$ be a projective algebraic curve over $\CC$, and fix a point $x \in X$.

The map $D_x \rightarrow X$ induces the map $D^\times_x \rightarrow X \setminus x$ and the corresponding map of curves
\[\Oo_{X \setminus x} \rightarrow \Kk_x = \textrm{Frac}(\widehat{\Oo_{X,x}}). \]

As $\ghat$ is a central extension of $\gf((z))$, the isomorphism $\Kk_x \simeq \CC((z))$ defines a Lie algebra $\ghat_x \simeq \gf \otimes \Kk_x \oplus \CC \cdot K$.  Furthermore, the Residue Theorem saying that
\[\Res_x\alpha=0 \quad \forall \alpha \in \Omega_{X \setminus x} \]
implies that
\[\gf \otimes \Oo_{X \setminus x} \rightarrow \gf \otimes \Kk_x \]
can be extended into a map
\[\gf[X \setminus x]:=\gf \otimes \Oo_{X \setminus x} \rightarrow \gf_x \]
of Lie algebras.  Given this map, we can define, for the Kac-Moody vertex algebra, the \textit{vector space of coinvariants} as follows:
\[\widetilde{H}(V_k(\gf),X,x)=V_k(\gf) / (\gf[X \setminus x] \cdot V_k(\gf)). \]
Its dual, called the \textit{vector space of conformal blocks}, is as follows:
\[\widetilde{C}(V_k(\gf),X,x)=\hom_{\gf[X \setminus x]}(V_k(\gf),\CC). \]

This is a perfectly workable definition in the Kac-Moody case and can be generalized to other modules over the algebra; however, this cannot easily be generalized to arbitrary Lie algebras, and in fact even in the Virasoro vertex algebra case there are problems with trying to describe the conformal blocks by a quotient by $Vec(X/x)$.

Instead, it is easier to use all the vertex operators at once.  First, note that the map
\[\Yy_x^*: \Gamma(D_x^\times,\Vv \otimes \Omega) \rightarrow \End \Vv_x \]
will be zero for any element in the image of the map
\[\Vv \overset{\Delta}{\rightarrow} \Vv \otimes \Omega \]
by the translation axiom; as such, defining $h(\Vv \otimes \Omega)$ as the quotient by the action of $\Delta$, there will exist a Lie algebra homomorphism
\[\Gamma(D_x^\times,h(\Vv \otimes \Omega)) \rightarrow \End(\Vv_x), \]
with an injective Lie algebra homomorphism
\[\Gamma(Z,h(\Vv \otimes \Omega)) \rightarrow \Gamma(Y,h(\Vv \otimes \Omega)) \]
corresponding to any map $Y \rightarrow Z$.  Note that the fact that $h(\Vv \otimes \Omega)$ is a Lie algebra can be related directly to the aforementioned chiral algebra structure.

Now, for \textit{any} vertex operator algebra, we can define the coinvariants and conformal blocks as follows:
\begin{align}
  H(V,X,x)&=\Vv_x / \Gamma(\Sigma,h(\Vv \otimes \Omega))\\
  C(V,X,x)&=\hom_{\Gamma(\Sigma,h(\Vv \otimes \Omega))}(\Vv_x,\CC).
\end{align}
where $\Sigma=X \setminus x$.

Recall that for all $A \in \Vv_x \simeq V, \varphi \in \hom_\CC(\Vv_x,\CC) = \Vv_x^*$, the product
\[\langle \varphi,\Yy_x \cdot A \rangle \]
will be a section of $\Vv^*$ on $D_x^\times$.  By the Strong Residue Theorem(defined and proven in \cite{MR0227171}), the condition of being $\Gamma(\Sigma,h(\Vv \otimes \Omega))$-invariant is equivalent to the aforementioned section having an extension from $D_x^\times$ to $X \setminus x$.  In particular, this is a dual definition of the conformal blocks.

\subsection{Modules of vertex algebras}
\label{sec:voareps}
Let $V$ be a graded vertex algebra over $\CC$.  A complex vector space $M$ is a \textit{$V$-module} if it has:
\begin{itemize}
\item A gradation $M=\bigoplus_{n \in \ZZ}M_n$,
\item A map $Y_M: V \rightarrow \End{M[[z^{\pm 1}]]}$
\end{itemize}
satisfying the following properties:
\begin{itemize}
\item Given $A \in V_n$, $Y_M(A,z)$ has conformal dimension $n$.
\item $Y_M(\vac,z)=id_M$
\item For all $A,B \in V, m \in M$, there exists an element of $M[[z,w]][z^{-1},w^{-1},(z-w)^{-1}$ that expands to:
  \begin{itemize}
  \item $Y_M(A,z)Y_M(B,w)m \in M((z))((w))$
  \item $Y_M(B,w)Y_M(A,z)m \in M((w))((z))$
  \item $Y_M(Y(A,z-w)B,w)m \in M((w))((z-w))$.
  \end{itemize}

\end{itemize}
Note that the first edition of \cite{MR2082709} defines a module in a different, but equivalent, way.

When $V$ is a vertex operator algebra, a $V$-module $M$ is called \textit{conformal} if the action of $L_0=\omega_{(1)}$ differs from that implied by the grading by a constant.  Given a vertex operator algebra $V$ and conformal $V$-module $M$, the Virasoro action on $V$ is inherited by $M$, and so we can create a $\Dd$-module (vector bundle with connection) $\Mm$ with a similar action of $h(\Vv \otimes \Omega)$ and a similar endomorphism-valued section $\Yy_M$.  However, if the gradation is no longer integral, then the space must be extended by the set of nonzero tangent vectors at a point, as $L_0$ acting nonintegrally means that the full group $\Aut \CC[[z]]$ no longer acts.

\subsection{General conformal blocks}
Let $V$ be a vertex operator algebra, and $X$ a projective algebraic curve over $\CC$.

Let $M_1,...,M_n$ be $V$-modules, and $x_1,...,x_n \in X$ distinct points on $X$.  Identify each $M_i$ with the vector bundle $\Mm_i$ on the disc $D_{x_i}$, and consider functionals $\varphi$ on $\bigotimes_{i=1}^n M_i$ such that the sections
\[\langle \varphi, A_1 \otimes ... \otimes (\Yy_{M_i,x_i} \cdot A_i) \otimes ... \otimes A_n \rangle \]
on $D_{x_i}^\times$ all extend to the \textit{same} section of $\Vv^*$ over $\Sigma:=X \setminus \{x_1,...,x_n\}$.  Such a functional is called a conformal block; the vector space of conformal blocks over the collection of modules $(M_i)$ on the points $(x_i)$ is denoted
\[C_V(X,(x_i),(M_i)). \]
Dually, we can define the conformal blocks as the $\Gamma(\Sigma,h(\Vv \otimes \Omega))$-invariants of functionals on the tensor product of the $M_i$s, and a space of coinvariants as the coinvariants of that tensor product.

Note, however, that the set of points is sufficient to determine the conformal blocks only when $L_0$ acts integrally on each module; otherwise, one also requires an element of the tangent space at each point.  However, in genus $0$ where the bulk of explicit calculations will be done, we have a canonical tangent vector, after fixing points $0$, $1$, and $\infty$.

\subsection{Functoriality of conformal blocks}
There are two ways in which the category theory of modules is relevant to conformal blocks.  The first part of functoriality is simply that 
\[C_V(X,(x_i),-): ((V-Mod)^n)^{op} \rightarrow \CC-Mod \]
is in fact a functor in each of its elements.  In fact, given a set of morphisms $M_i \rightarrow N_i$, the map
\[C_V(X,(x_i),(N_i)) \rightarrow C_V(X,(x_i),(M_i)) \]
can be found by simply using $\hom_\gf(-,\CC)$ as a functor, where $\gf$ is the Lie algebra built from $h(\Vv \otimes \Omega)$.

The other morphisms relevant to functoriality for conformal blocks involves morphisms of vertex operator algebras.  Let $V \rightarrow W$ be a conformal morphism of vertex operator algebras; then, there exist natural bundle maps $\Vv \rightarrow \Ww$ and $\Ww^* \rightarrow \Vv$.  Given a conformal $W$-module $M$, it is possible to give $M$ a conformal $V$-module structure by passing $\Yy^W_{M,x}$ through the map $\Ww^* \rightarrow \Vv^*$, giving $\Yy^V_{M,x}$.

So, if $\varphi: \hom_\CC(\bigotimes M_i,\CC)$ is a conformal block on $W$ given $X,x_1,...,x_n$, then the sections
\[\langle \varphi,A_1 \otimes ... \otimes(\Yy^W_{M_i,x_i}\cdot A_i) \otimes ... \otimes A_n \rangle \]
extend to $X \setminus \{x_i\}$, can be projected to $\Vv$ and restricted to $D_{x_i}$, yielding
\[\langle \varphi,A_1 \otimes ... \otimes(\Yy^V_{M_i,x_i}\cdot A_i) \otimes ... \otimes A_n \rangle, \]
thus satisfying the requirements for a conformal block on $V$.  Therefore, there is an \textit{embedding}
\[C_W(X,(x_i),(M_i)) \rightarrow C_V(X,(x_i),(M_i)). \]

In particular, for any vertex operator algebra $V$ with central charge $c$, there exists a conformal vertex algebra morphism
\[Vir_c \rightarrow V \]
and a corresponding embedding
\[C_V(X,(x_i),(M_i)) \rightarrow C_{Vir_c}(X,(x_i),(M_i)). \]
Note that even in the case $V_k(\gf)$, this is nontrivial, as the Sugawara operator is non-linear with respect to the affine Lie algebra.
\subsection{Chiral correlation functions}
For simplicity, for now assume that the $M_i$ have integral eigenvalues; the case where the eigenvalues are not integral can be done similarly but require further work.

We would like to identify the conformal blocks with a subbundle of $(\Mm_1 \boxtimes ... \boxtimes \Mm_n)^*$ on
\[\mathring{X}^n=X^n \setminus \Delta. \]
on which the connection is closed, identifying conformal blocks on nearby points and producing a canonical way to describe the quantum states (up to possible monodromy).

First, note the effect of including $V$ as a module: it acts as an identity module for conformal blocks, and can be removed.  More precisely, there is a \textit{canonical} isomorphism
\[C_V(X,(x_1,...,x_n,y),(M_1,...,M_n,V)) \simeq C_V(X,(x_1,...,x_n),(M_1,...,M_n)) \]
given by restricting $\varphi$ to $\Mm_{1,x_1} \otimes ... \otimes \Mm_{n,x_n} \otimes \vac$.

The proof is as follows: Consider the section on $X \setminus \{x_i\}$ given by the definition of a conformal block, that restricts to $\langle \varphi,A_1 \otimes ... \otimes (\Yy^{M_i}_{x_i}\cdot A_i) \otimes ... \otimes A_n \rangle$ near $x_i$ for each $i$.

Take the value of that section at $y \in X$: This extends to a section that should invert the canonical isomorphism..  However, we need to show that it actually is a conformal block.

To do so, we construct a section of $(\Vv \otimes \Vv)^*$ on the space
\[X^2 \setminus(  (\{x_i\} \times X) \cup (X \times \{x_i\}) \cup \Delta), \]
which is the complement of a divisor that has three parts:
\begin{itemize}
\item The horizontal lines $y_1=x_i$.
\item The vertical lines $y_2=x_i$.
\item The diagonal $y_1=y_2$.
\end{itemize}
and the divisors intersect in two ways:
\begin{itemize}
\item A vertical and horizontal line $y_1=x_i,y_2=x_j,i \ne j$.  This is a relatively trivial intersection.
\item $y_1=y_2=x_i$, which is the intersection of three lines.
\end{itemize}
The section can be found near the $i \ne j$ intersections by simply applying the relevant $\Yy$ to each factor, and near $y_1=y_2=x_i$ by using the locality property and identifying $\CC[[z,w]][z^{-1},w^{-1},(z-w)^{-1}]$ with the local neighborhood of $X^2$ around that point with the divisors removed.

This can then be extended to the neighborhoods of each divisor by applying the conformal block.  To extend to the entire space, one uses what is called modification in the sense of Geometric Langlands to turn the filtration of meromorphic sections of $\Vv \otimes \Vv$ into one of \textit{holomorphic} sections on a different filtration of finite-rank vector bundles.  Then, one can pushforward to a projection and leverage that to show that the section extends to the entire space.

\subsection{Two-point functions, $n$-point functions}
An immediate corollary of this fact is that all the spaces $C_v(X,(x_i),V))_{i=1}^n$ are canonically isomorphic for all $n$ and all $x_i$.  For a given $\varphi \in C(X,x,V)$ let $\varphi_{x_1,...,x_n} \in C_V(X,(x_i),(V))$ be the corresponding conformal block.

For $n=2$, there is a regular section $\varphi_2$ of the bundle $(\Vv \boxtimes \Vv)*$ over $X^2 \setminus \Delta$ gluing together the conformal blocks $\varphi_{x_1,x_2}$.  If $x_1$ and $x_2$ are both sufficiently close to $x$, then a coordinate $z$ can be identified and the values $z_1,z_2$ are the corresponding values of $x_1,x_2$ and the conformal block can be written
\[\langle \varphi_2,A_1 \otimes A_2 \rangle = \langle \varphi, Y(A_1,z_1)Y(A_2,z_2)\vac \rangle \in \CC[[z_1,z_2]][(z_1-z_2)^{-1}]. \]

For \textit{any} $\varphi \in \Vv_x^*$, this formula gives a horizontal section of $(\Vv \boxtimes \Vv)^*$ on $D_x^2 \setminus \Delta$, giving an embedding
\[\Vv_x^2 \rightarrow \Gamma_\nabla(D_x^2,(\Vv \boxtimes \Vv)^*(\infty \Delta))=\hom_{\Dd_{D_x^2}}(\Vv \boxtimes \Vv,\Oo_{X^2}(\infty \Delta)), \]
where $\Gamma_\nabla$ represents the horizontal global sections.  If $\varphi$ is a conformal block, however, this extends to a horizontal section on $X^2 \setminus \Delta$.

In general, for $n$-point conformal blocks, if all the points are near a point $x$, it can be described as
\[\langle \varphi, Y(A_1,z_1)...Y(A_n,z_n)\vac \rangle \in \CC[[z_i]][(z_i-z_j)^{-1}]. \]

By requiring ``bootstrap conditions'', we can find a quotient $(\Vv^{\boxtimes n})^*(\infty \Delta) \rightarrow \Vv^*_n$ such that we get the commutative diagram
\[
  \begin{tikzcd}
    C(X,x,V) \arrow[r,"\sim"] \arrow[d] & \Gamma_\Delta(X^n,\Vv_n^*) \arrow[d]\\
    \Vv_x^* \arrow[r,"\sim"] & \Gamma_\Delta(D_x^n,\Vv_n^*)
  \end{tikzcd}
\]
and these $\Vv_n^*$ will be the duals of sheaves $\Vv_n$ that constitute the factorization algebra.

\subsection{Conformal blocks in genus zero}
Now, we fix $X=\PP^1$ and fix points $0 \in X, \infty \in X$ once and for all.  Given this, we pick a global coordinate $t$ on $X \setminus \infty$ such that $t=0$ corresponds to the point $0$ and $t=\infty$ corresponds to the point $\infty$.

To calculate the conformal blocks for the sphere, first note that $U(V)=\Gamma(D^\times,h(\Vv \otimes \Omega))$ can be described explicitly by its action on $V$, as the completion of the span of the Fourier coefficients $A_{(n)}$ in $\End(V)$.  The subspace $\Gamma(\PP^1 \setminus 0,\Vv_0 \otimes Omega)$ will be the vector space spanned by $A_{(n)}$, where $A$ is homogeneous of degree $m$ and $n \le 2(m-1)$.  In particular, since $A_{(-1)}\vac=A$, applying the Lie algebra to $\vac$ gets $\bigoplus_{n>0}V_n$ and
\[H(\PP^1,0,V)=V/V_{>0}\simeq \CC \vac. \]

Let $\varphi_0:V \rightarrow \CC$ be such that $\varphi_0(\vac)=1, \varphi_0(V_{>0})=0$.  Then $\varphi_0$ spans $C(\PP^1,0,V)$.

To find the $n$-point functions, the canonical $n$-point function $\varphi_{x_1,...,x_n}$ corresponding to $\varphi_0$ should be a section on $\mathring{X}^n$; by using the canonical coordinate, this can be thought of as a function in
\[\CC[z_1,...,z_n,(z_i-z_j)^{-1}] \]
with finite asymptotics at $\infty$.  When all $x_i$ are near $0$, this becomes
\[\langle \varphi_{x_1,...,x_n},A_1 \otimes ... \otimes A_n\rangle=\langle\varphi_0,Y(A_1,z_1)...Y(A_n,z_n)\vac \rangle \in \CC[[z_1,...,z_n]][(z_i-z_j)^{-1}].\]
Since $\varphi_0$ vanishes on degree $>0$, apply the grading; graded elements of the formal power series ring will be polynomials proper, so the value will in fact lie in the above polynomial ring.  That this corresponds to $\varphi_0$ follows from checking  the claim at $A_i=\vac$.

\subsubsection{The contragredient}
Now, to replace $\varphi_0$ with a more general functional, by putting a corresponding module to $V^*$ at $\infty$.  By definition,
\[\langle \varphi,\Yy_0(A) \cdot C\rangle=\langle \varphi, Y(A,t)C \rangle \in \CC[[t]] \quad A,C \in V, \varphi \in V^*. \]
More tractable than the full dual is the graded dual
\[V^\vee = \bigoplus_{n \ge 0}V_n^* \subset V^* \]
as mentioned in section (\ref{sec:geomvoa}).  If $\varphi \in V^\vee$, the grading implies that $\langle \varphi, Y(A,t)C \rangle \in \CC[t^{\pm 1}]$.

The global coordinate on $\PP^1 \setminus \{0,\infty\}$ is unique up to action by $\CC^\times \subset \Aut \Oo$ and corresponds to tangent vectors at $0$; this preserves $V^\vee$, so let $\Vv_0$ and $\Vv^\vee_0$ be the twists of $V$ and $V^\vee$ by the $\CC^\times$-torsor of tangent vectors at $0$.

For $C \in \Vv_0, \varphi \in \Vv^\vee_0$, $\langle \varphi, \Yy_0 \cdot C \rangle$ of $\Vv^*|_{D_0^\times}$ extends to a meromorphic section on $\PP^1$ with poles only at $0$ and $\infty$.

What does this section look like near $\infty$? Consider the local coordinate $u=t^{-1}$ at $\infty$; for a point $x \in \PP^1$ such that $x$'s $u$ coordinate is $z$ and its $t$-coordinate is $z^{-1}$, we can switch between the two corresponding coordinates around $x$
\[u_z=u-z \quad \widetilde{u_z}=t-z^{-1}=u^{-1}-z^{-1} \]
by
\begin{align}
  u_z&=\mu_z(\widetilde{u_z})\\
  \mu_z(y)&=(y+z^{-1})^{-1}-z=-\frac{z^2y}{zy+1}=-z^2y+z^3y^2-...\\
  &=e^{-zy^2\partial_y}((-z^{-2})^{-y\partial y}y).
\end{align}
This action produces $R(\mu_u)=e^{uL_1}(-u^{-2})^{L_0}$ as its action on $V$, so for $A \in V$, the isoorphism taking $D$ to $D_\infty$ gives
\[\langle \varphi,\Yy_0 \cdot C \rangle|_{D_\infty^\times}=\langle \varphi,Y(e^{uL_1}(-u^2)^{L_0}A,u^{-1})C \rangle, \]
which can be made into a linear map $\widetilde{Y}: V \rightarrow \End V^\vee[[u^{-1}]]$ making $V^\vee$ into a $V$-module, called the \textit{contragredient module}.  A similar module structure can be found for the graded dual of any module $M$ in a similar way.

(\tk should I put the proof using the involution here?  It's the proof I used for my notes.)

\subsubsection{Conformal blocks as operadic maps}
Consider $C(\PP^1,(0,\infty),(V,V^\vee))$, and $\Phi_0: V \otimes V^\vee \rightarrow \CC$ the natural pairing.  $\Phi_0$ is a conformal block, as $\Yy$ becoming $\widetilde{Y}$ is actually the definition of $\widetilde{Y}$.  Then,
\[C(\PP^1,((x_i),\infty),((V),V^\vee)) \simeq C(\PP^1,(0,\infty),(V,V^\vee))\]
and
\[\langle \Phi_{x_1,...,x_n},A_1 \otimes ... \otimes A_n \otimes \varphi \rangle = \langle \varphi, Y(A_1,z_1)...Y(A_n,z_n)\vac \rangle \in \CC[z_1,...,z_n,(z_i-z_j)^{-1}]. \]

In particular, when $n=2$, the canonical element of $C(\PP^1,(0,z,\infty),(V,V,V^\vee))$ is described precisely by the action of multiplication in the vertex operator algebra; that it is a conformal block relates to the existence of the $n=3$ conformal block in $C(\PP^1,(0,z,w,\infty),(V,V,V,V^\vee))$, which is itself the element defined by the locality and Cousin/associativity properties.

In fact, all these conformal blocks are precisely the functionals used to define a geometric Lie algebra in (\ref{sec:geomvoa}).  To show that things such as the gluing axiom are valid using the conformal block formalism, however, requires a more sophisticated process: Recall the gluing process, in which circles of radius $r$ and $1/r$ were removed, respectively, and consider instead gluing using arbitrary circles.  This is equivalent to \textit{scaling} one or both of the spheres with tubes.  If one considers a Riemann surface with a circle (in some atlas) removed, letting the radius of the circle approach zero will lead to sheaves and functions equivalent to removing a point instead.  Therefore, the process of gluing at circles has as its limiting case a process of gluing at punctures, which can be defined algebraically.

When we glue at a puncture, the actual process involves adding a point that ``belongs to'' both surfaces.  When this is done, the result will be a \textit{singular} curve.  When conformal blocks are extended into (twisted) $\Dd$-module structures on the moduli space of curves, the singular curves necessary to understand are the ones that are introduced by the Deligne compactification, and in the cases of the rational vertex operator algebras based on the Kac-Moody and Virasoro algebras\footnote{quotients of the KM and Virasoro algebras defined in (\ref{sec:latticeaffine}) such that the category of representations is semisimple with finitely many simple modules}, the relation of the conformal blocks on a singular curve to both nearby (in the sense of the Deligne compactification) smooth curves and the resolution of singularities is known.
\subsection{The Knizhnik-Zamolodchikov equations}
Let $\gf$ be a finite-dimensional simple Lie algebra.  In the case $V=V_k(\gf)$ and $X=\PP^1$, there is a nice, classical way to describe the conformal blocks and horizontal sections thereof.

Start by fixing $X=\PP^1$, the points $0,1,\infty$ and $N$ points $\xv=(x_1,...,x_N)$, with $x_i \ne \infty$.  The choice of tangent vector at each $x_i$ can be fixed by translating the vector $1 \in \CC \simeq T_0\PP^1$.

To streamline the Kac-Moody-specific definition of conformal blocks, first define the loop group at a point $L\gf(x_i):=\gf((t-x_i))$ and the diagonal central extension
\[0 \rightarrow \CC \cdot K \rightarrow \ghat(\xv) \rightarrow \bigoplus_{i=1}^N L\gf(x_i) \rightarrow 0 \]
defining $\ghat(\xv)$, where the restriction to each coordinate is exactly the usual $\ghat$.  The Residue Theorem implies a map
\[\gf \otimes \CC[\PP^1 \setminus \{x_1,...,x_n\}] \rightarrow \ghat(\xv). \]

The representations of $V_k(\gf)$ can all be described as follows: Let $M \in \gf-mod$.  Then,
\[\MM^k=\Ind^{\ghat}_{\gf[[t]] \oplus \CC \cdot K}M \]
will be a representation of $V_k(\gf)$.  Let $M_1,...,M_N \in \gf-mod$.  Then,
\[C_{V_k(\gf)}(\PP^1,\xv,(\MM_i^k)) \simeq \hom_\gf\left(\bigotimes_i M_i,\CC \right). \]
The proof proceeds as follows:

The Poincaré-Birkhoff-Witt theorem produces an isomorphism
\[\MM_i^k=U((t-x_i)^{-1}\gf[(t-x_i)^{-1}]) \cdot M_i \simeq V_k(\gf) \otimes M_i \]

A formal version of Čech cohomology leads to these identities:
\begin{align}
  \bigoplus_i \CC((t-x_i)) &= \bigoplus_i \CC[[t-x_i]] + \CC[\PP^1 \setminus \{x_i\}]\label{cech1}\\
  \CC &= \bigoplus_i \CC[[t-x_i]] \cap \CC[\PP^1 \setminus \{x_i\}].\label{cech2}
\end{align}

Making clever use of (\ref{cech1}), one can show that any functional on $\bigotimes_i \MM_i$ can be determined by its values on $\bigotimes_i M_i$; making clever use of (\ref{cech2}), one can show that any relation required between elements of $\bigotimes_i M_i$ must be describable just in terms of $\gf$-invariance itself.
(I don't think Ben-Zvi/Frenkel actually prove this in full in the K-M case, just the Heisenberg one)

\subsubsection{Derivation of the KZ equations}
First, note that $\gf \otimes \CC[\PP^1 \setminus \{x_i\}]$ can be expanded onto the entire moduli space as $\gf \otimes \Bb_N$, where
\[\Bb_N \subsetneq \CC[t,x_i,(x_i-x_j)^{-1},(t-x_i)^{-1}]_{i \ne j} \]
is the space of functions on $N$ points that behave when $t \rightarrow \infty$.

On the space of functionals (and thus the conformal blocks) on $\bigotimes_i \MM_i$, the connection will be defined in terms of
\[\nabla_i = \frac{\partial}{\partial x_i} - L^{(i)*}_{-1}, \]
where $(i)$ means the Virasoro coefficient action only on the $i$th component.  Recall the Sugawara conformal vector
\[\omega = \frac{1}{2(k+h^\vee)} \sum_a J_{a,-1}J^a_{-1} \vac. \]
From this, we can get the translation operator
\[L_{-1} = \frac{1}{2(k+h^\vee)} \sum_{m \in \ZZ} \sum_a \normord{J_{a,m}J^a_{-m-1}}. \]
To find the connection on the conformal blocks, we merely need to see how $L_{-1}\eta$ acts on $\bigotimes_i M_i$, for $\eta$ a conformal block.  Recall, for an element $v \in M_i$,
\begin{align}
  J^a_m \cdot v&=0 \quad m>0\\
  J^a_0 \cdot v=J^a\cdot v,
\end{align}
so the only terms of the translation operator that will not be sent to $0$ immediately are those for which $m=0$ or $m=-1$, which can be combined into a single term by the inherent symmetry of normal ordering and invariance of the Casimir sums on the basis.
Then, for any $w \in \bigotimes_i M_i$,
\[(L^{(i)*}_{-1}\eta)(w)=\eta(L^{(i)}_{-1}w)=\frac{1}{k+h^\vee}\eta \left( \sum_a (J^a_{-1})^{(i)}(J_{a,0})^{(i)}w \right). \]

Recall that $(J^a_{-1})^{(i)}=J^a \otimes (t-x_i)^{-1}$.  To get rid of this term from the $(i)$ term, simply apply $-J^a \otimes (t-x_i)^{-1} \in \gf \otimes \Bb_n$, which for every tensor term other than $i$ acts as $1/(x_i-x_j)J^a_0$, giving
\[(L^{(i)*}_{-1}\eta)(w)=\sum_{j \ne i}\frac{1}{x_i-x_j} \sum_a J_a^{(i)}J^{a(j)} =: \sum_{j \ne i} \frac{t_{ij}}{x_i-x_j} \] 
and the KZ equations
\[dF = \sum_{i \ne j}t_{ij}F \cdot d\log(x_i-x_j) \]
for conformal blocks.  

\bibliography{refs}{}
\bibliographystyle{alpha}
\end{document}
 